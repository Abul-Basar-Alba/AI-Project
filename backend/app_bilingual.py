"""
HealthNest AI - Bilingual Health Chatbot Backend
Automatic language detection (Bengali/English)
Complete knowledge base covering all HealthNest app features
"""

from flask import Flask, request, jsonify
from flask_cors import CORS
import math
import re
from datetime import datetime

app = Flask(__name__)
CORS(app)

# ==================== LANGUAGE DETECTION ====================

def detect_language(text):
    """Detect if text is in Bengali or English"""
    # Bengali Unicode range: \u0980-\u09FF
    bengali_chars = re.findall(r'[\u0980-\u09FF]', text)
    
    # If more than 20% Bengali characters, consider it Bengali
    if len(bengali_chars) > len(text) * 0.2:
        return 'bn'
    return 'en'

# ==================== BILINGUAL HEALTH KNOWLEDGE BASE ====================

HEALTH_KNOWLEDGE = {
    "app_info": {
        "keywords_bn": ["healthnest", "ржЕрзНржпрж╛ржк", "ржХрж┐", "ржХрзЗржи", "ржХрж┐ржнрж╛ржмрзЗ", "ржмрзИрж╢рж┐рж╖рзНржЯрзНржп", "ржмрзНржпржмрж╣рж╛рж░"],
        "keywords_en": ["healthnest", "app", "what", "why", "how", "features", "use"],
        "response_bn": """ЁЯПе **HealthNest - ржЖржкржирж╛рж░ рж╕ржорзНржкрзВрж░рзНржг рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕ржЩрзНржЧрзА**

HealthNest рж╣рж▓рзЛ ржПржХржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛ ржЕрзНржпрж╛ржк ржпрж╛ ржЖржкржирж╛рж░ ржПржмржВ ржЖржкржирж╛рж░ ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржпрж╕рзЗржмрж╛ рж╕рж╣ржЬ ржХрж░рзЗред

**ЁЯОп ржорзВрж▓ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп:**

1я╕ПтГг **рж╕рзНржмрж╛рж╕рзНржерзНржп ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ:**
   - BMI ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░
   - ржУржЬржи рж╣рзНрж░рж╛рж╕ ржкрж░рж┐ржХрж▓рзНржкржирж╛
   - ржкрж╛ржирж┐ ржкрж╛ржи рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░
   - ржШрзБржо ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
   - ржзрж╛ржк ржЧржгржирж╛

2я╕ПтГг **ржорж╣рж┐рж▓рж╛ рж╕рзНржмрж╛рж╕рзНржерзНржп:**
   - ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛ ржЯрзНрж░рзНржпрж╛ржХрж╛рж░
   - ржкрж┐рж░рж┐ржпрж╝ржб ржХрзНржпрж╛рж▓рзЗржирзНржбрж╛рж░
   - PCOS ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛

3я╕ПтГг **ржФрж╖ржз ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛:**
   - ржФрж╖ржз рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░
   - ржбрзЛржЬ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
   - ржУрж╖рзБржзрзЗрж░ ржорж┐ржерж╕рзНржХрзНрж░рж┐ржпрж╝рж╛ рж╕рждрж░рзНржХрждрж╛

4я╕ПтГг **ржкрж░рж┐ржмрж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп:**
   - ржкрж╛рж░рж┐ржмрж╛рж░рж┐ржХ ржкрзНрж░рзЛржлрж╛ржЗрж▓
   - рж░ржХрзНрждржЪрж╛ржк ржоржирж┐ржЯрж░рж┐ржВ
   - ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ

5я╕ПтГг **рж╕рзНржмрж╛рж╕рзНржерзНржп ржбрж╛ржпрж╝рзЗрж░рж┐:**
   - ржжрзИржирж┐ржХ ржирзЛржЯ
   - ржЙржкрж╕рж░рзНржЧ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
   - ржорзЗржбрж┐ржХрзНржпрж╛рж▓ рж░рж┐ржкрзЛрж░рзНржЯ рж╕ржВрж░ржХрзНрж╖ржг

**ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?**
тЬЕ ржПржХржЯрж┐ ржЕрзНржпрж╛ржкрзЗ рж╕ржм рж╕рзНржмрж╛рж╕рзНржерзНржп рждржерзНржп
тЬЕ рж╕рзНржорж╛рж░рзНржЯ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░ рж╕рж┐рж╕рзНржЯрзЗржо
тЬЕ ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕ржХрж▓рзЗрж░ ржЬржирзНржп
тЬЕ ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛ рж╕ржорж░рзНржержи
тЬЕ рж╕ржорзНржкрзВрж░рзНржг ржирж┐рж░рж╛ржкржж ржПржмржВ ржкрзНрж░рж╛ржЗржнрзЗржЯ""",
        "response_en": """ЁЯПе **HealthNest - Your Complete Health Companion**

HealthNest is a comprehensive health management app that simplifies healthcare for you and your family.

**ЁЯОп Key Features:**

1я╕ПтГг **Health Tracking:**
   - BMI Calculator
   - Weight Loss Planning
   - Water Intake Reminders
   - Sleep Tracking
   - Step Counter

2я╕ПтГг **Women's Health:**
   - Pregnancy Tracker
   - Period Calendar
   - PCOS Management

3я╕ПтГг **Medicine Management:**
   - Medicine Reminders
   - Dose Tracking
   - Drug Interaction Alerts

4я╕ПтГг **Family Health:**
   - Family Profiles
   - Blood Pressure Monitoring
   - Diabetes Tracking

5я╕ПтГг **Health Diary:**
   - Daily Notes
   - Symptom Tracking
   - Medical Report Storage

**Why Use It?**
тЬЕ All health info in one app
тЬЕ Smart reminder system
тЬЕ For entire family
тЬЕ Bengali language support
тЬЕ Completely safe and private"""
    },
    
    "bmi": {
        "keywords_bn": ["bmi", "ржмржбрж┐ ржорж╛рж╕", "ржУржЬржи рж╕рзВржЪржХ", "рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржУржЬржи", "ржорзЛржЯрж╛", "ржЪрж░рзНржмрж┐"],
        "keywords_en": ["bmi", "body mass", "weight index", "healthy weight", "fat", "obesity"],
        "response_bn": """тЪЦя╕П **BMI ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░**

**BMI ржХрж┐?**
Body Mass Index (BMI) рж╣рж▓рзЛ ржЖржкржирж╛рж░ ржЙржЪрзНржЪрждрж╛ ржЕржирзБржпрж╛ржпрж╝рзА ржУржЬржирзЗрж░ ржПржХржЯрж┐ рж╕рзВржЪржХред

**BMI ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐:**
- ЁЯЯв 18.5 ржПрж░ ржирж┐ржЪрзЗ: ржХржо ржУржЬржи
- ЁЯЯв 18.5-24.9: рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржУржЬржи
- ЁЯЯб 25-29.9: ржЕрждрж┐рж░рж┐ржХрзНржд ржУржЬржи
- ЁЯФ┤ 30+: рж╕рзНржерзВрж▓рждрж╛

**ржХрж┐ржнрж╛ржмрзЗ рж╣рж┐рж╕рж╛ржм ржХрж░ржмрзЗржи?**
BMI = ржУржЬржи (ржХрзЗржЬрж┐) ├╖ ржЙржЪрзНржЪрждрж╛┬▓ (ржорж┐ржЯрж╛рж░)

ржЙржжрж╛рж╣рж░ржг: ржУржЬржи 70kg, ржЙржЪрзНржЪрждрж╛ 1.70m
BMI = 70 ├╖ (1.70 ├Ч 1.70) = 24.2 (рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░)

**HealthNest ржЕрзНржпрж╛ржкрзЗ:**
- рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ BMI рж╣рж┐рж╕рж╛ржм
- рж▓ржХрзНрж╖рзНржп ржУржЬржи ржирж┐рж░рзНржзрж╛рж░ржг
- ржУржЬржи ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржЪрж╛рж░рзНржЯ""",
        "response_en": """тЪЦя╕П **BMI Calculator**

**What is BMI?**
Body Mass Index (BMI) is an indicator of your weight according to your height.

**BMI Categories:**
- ЁЯЯв Below 18.5: Underweight
- ЁЯЯв 18.5-24.9: Healthy Weight
- ЁЯЯб 25-29.9: Overweight
- ЁЯФ┤ 30+: Obese

**How to Calculate?**
BMI = Weight (kg) ├╖ Height┬▓ (meters)

Example: Weight 70kg, Height 1.70m
BMI = 70 ├╖ (1.70 ├Ч 1.70) = 24.2 (Healthy)

**In HealthNest App:**
- Automatic BMI calculation
- Goal weight setting
- Weight tracking charts"""
    },
    
    "weight_loss": {
        "keywords_bn": ["ржУржЬржи ржХржорж╛ржирзЛ", "ржУржЬржи рж╣рзНрж░рж╛рж╕", "ржбрж╛ржпрж╝рзЗржЯ", "ржЪрж░рзНржмрж┐ ржХржорж╛ржирзЛ", "рж╕рзНрж▓рж┐ржо"],
        "keywords_en": ["weight loss", "lose weight", "diet", "fat loss", "slim", "slimming"],
        "response_bn": """ЁЯОп **рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржУржЬржи ржХржорж╛ржирзЛрж░ ржкрж░рж┐ржХрж▓рзНржкржирж╛**

**ржорзВрж▓ ржирзАрждрж┐:**
1я╕ПтГг **ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржбрзЗржлрж┐рж╕рж┐ржЯ:** ржкрзНрж░рждрж┐ржжрж┐ржи 500 ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржХржо ржЦрж╛ржи
2я╕ПтГг **ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржпрж╝рж╛ржо:** рж╕ржкрзНрждрж╛рж╣рзЗ 5 ржжрж┐ржи, 30 ржорж┐ржирж┐ржЯ
3я╕ПтГг **рж╕рзБрж╖ржо ржЦрж╛ржмрж╛рж░:** ржкрзНрж░рзЛржЯрж┐ржи, рж╢рж╛ржХрж╕ржмржЬрж┐, ржЬржЯрж┐рж▓ ржХрж╛рж░рзНржмрзЛрж╣рж╛ржЗржбрзНрж░рзЗржЯ
4я╕ПтГг **ржкрж░рзНржпрж╛ржкрзНржд ржкрж╛ржирж┐:** ржжрж┐ржирзЗ 2-3 рж▓рж┐ржЯрж╛рж░
5я╕ПтГг **ржкрж░рзНржпрж╛ржкрзНржд ржШрзБржо:** 7-8 ржШржирзНржЯрж╛

**ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи:**
тЭМ ржЪрж┐ржирж┐ ржПржмржВ ржорж┐рж╖рзНржЯрж┐
тЭМ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржЬрж╛ржд ржЦрж╛ржмрж╛рж░
тЭМ ржлрж╛рж╕рзНржЯ ржлрзБржб
тЭМ ржХрзЛржорж▓ ржкрж╛ржирзАржпрж╝

**рж╕рзБрж╕рзНрже рж╣рж╛рж░рзЗ ржУржЬржи ржХржорж╛ржи:**
- ржкрзНрж░рждрж┐ рж╕ржкрзНрждрж╛рж╣рзЗ 0.5-1 ржХрзЗржЬрж┐
- ржзрзИрж░рзНржп ржзрж░рзБржи ржПржмржВ ржирж┐ржпрж╝ржорж┐ржд ржерж╛ржХрзБржи

**HealthNest ржП:**
- рж▓ржХрзНрж╖рзНржп рж╕рзЗржЯ ржХрж░рзБржи
- ржкрзНрж░ржЧрждрж┐ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзБржи
- ржжрзИржирж┐ржХ ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржЧржгржирж╛""",
        "response_en": """ЁЯОп **Healthy Weight Loss Plan**

**Key Principles:**
1я╕ПтГг **Calorie Deficit:** Eat 500 calories less per day
2я╕ПтГг **Regular Exercise:** 5 days a week, 30 minutes
3я╕ПтГг **Balanced Diet:** Protein, vegetables, complex carbs
4я╕ПтГг **Adequate Water:** 2-3 liters per day
5я╕ПтГг **Sufficient Sleep:** 7-8 hours

**Avoid:**
тЭМ Sugar and sweets
тЭМ Processed foods
тЭМ Fast food
тЭМ Soft drinks

**Healthy Weight Loss Rate:**
- 0.5-1 kg per week
- Be patient and consistent

**In HealthNest:**
- Set your goal
- Track progress
- Count daily calories"""
    },
    
    "nutrition": {
        "keywords_bn": ["ржкрзБрж╖рзНржЯрж┐", "ржЦрж╛ржмрж╛рж░", "ржХрзНржпрж╛рж▓рзЛрж░рж┐", "ржкрзНрж░рзЛржЯрж┐ржи", "ржнрж┐ржЯрж╛ржорж┐ржи"],
        "keywords_en": ["nutrition", "food", "calories", "protein", "vitamins", "diet"],
        "response_bn": """ЁЯеЧ **рж╕рзБрж╖ржо ржкрзБрж╖рзНржЯрж┐ ржЧрж╛ржЗржб**

**ржжрзИржирж┐ржХ ржорзНржпрж╛ржХрзНрж░рзЛ ржмрж┐ржнрж╛ржЬржи:**
- ЁЯНЧ ржкрзНрж░рзЛржЯрж┐ржи: 20-30% (рж╢рж░рзАрж░рзЗрж░ ржУржЬржи ├Ч 1.6g)
- ЁЯНЪ ржХрж╛рж░рзНржмрзЛрж╣рж╛ржЗржбрзНрж░рзЗржЯ: 45-55%
- ЁЯеС рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржлрзНржпрж╛ржЯ: 20-30%

**ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржЦрж╛ржмрж╛рж░ ржЧрзНрж░рзБржк:**

1я╕ПтГг **ржкрзНрж░рзЛржЯрж┐ржи (ржжрж┐ржирзЗ 2-3 рж╕рж╛рж░рзНржнрж┐ржВ):**
   - ржорж╛ржЫ, ржорж╛ржВрж╕, ржбрж┐ржо
   - ржбрж╛рж▓, ржмрж╛ржжрж╛ржо
   - ржжрзБржз, ржжржЗ

2я╕ПтГг **рж╕ржмржЬрж┐ (ржжрж┐ржирзЗ 3-5 рж╕рж╛рж░рзНржнрж┐ржВ):**
   - рж╕ржмрзБржЬ рж╢рж╛ржХрж╕ржмржЬрж┐
   - рж░ржЩрж┐ржи рж╕ржмржЬрж┐
   - рж╕рж╛рж▓рж╛ржж

3я╕ПтГг **ржлрж▓ (ржжрж┐ржирзЗ 2-3 рж╕рж╛рж░рзНржнрж┐ржВ):**
   - ржорзМрж╕рзБржорзА ржлрж▓
   - ржнрж┐ржЯрж╛ржорж┐ржи рж╕рж┐ ржпрзБржХрзНржд

4я╕ПтГг **рж╢рж╕рзНржп (ржжрж┐ржирзЗ 3-4 рж╕рж╛рж░рзНржнрж┐ржВ):**
   - ржмрж╛ржжрж╛ржорзА ржЪрж╛рж▓
   - ржЖржЯрж╛рж░ рж░рзБржЯрж┐
   - ржУржЯрж╕

5я╕ПтГг **ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо (ржжрж┐ржирзЗ 2-3 рж╕рж╛рж░рзНржнрж┐ржВ):**
   - ржжрзБржз, ржкржирж┐рж░
   - ржжржЗ, ржЫрж╛ржирж╛""",
        "response_en": """ЁЯеЧ **Balanced Nutrition Guide**

**Daily Macro Split:**
- ЁЯНЧ Protein: 20-30% (body weight ├Ч 1.6g)
- ЁЯНЪ Carbohydrates: 45-55%
- ЁЯеС Healthy Fats: 20-30%

**Essential Food Groups:**

1я╕ПтГг **Protein (2-3 servings/day):**
   - Fish, meat, eggs
   - Lentils, nuts
   - Milk, yogurt

2я╕ПтГг **Vegetables (3-5 servings/day):**
   - Green leafy vegetables
   - Colorful vegetables
   - Salads

3я╕ПтГг **Fruits (2-3 servings/day):**
   - Seasonal fruits
   - Vitamin C rich

4я╕ПтГг **Grains (3-4 servings/day):**
   - Brown rice
   - Whole wheat bread
   - Oats

5я╕ПтГг **Calcium (2-3 servings/day):**
   - Milk, cheese
   - Yogurt, cottage cheese"""
    },
    
    "water": {
        "keywords_bn": ["ржкрж╛ржирж┐", "ржЬрж▓", "рж╣рж╛ржЗржбрзНрж░рзЗрж╢ржи", "ржкрж╛ржирж┐ ржкрж╛ржи"],
        "keywords_en": ["water", "hydration", "drink", "fluid", "drinking"],
        "response_bn": """ЁЯТз **ржкрж╛ржирж┐ ржкрж╛ржи ржЧрж╛ржЗржб**

**ржжрзИржирж┐ржХ ржкрж╛ржирж┐рж░ ржЪрж╛рж╣рж┐ржжрж╛:**
- рж╕рж╛ржзрж╛рж░ржг: рж╢рж░рзАрж░рзЗрж░ ржУржЬржи ├Ч 30-35ml
- ржЙржжрж╛рж╣рж░ржг: 70kg тЖТ 2.1-2.5 рж▓рж┐ржЯрж╛рж░

**ржкрж╛ржирж┐ ржкрж╛ржирзЗрж░ рж╕ржоржпрж╝рж╕рзВржЪрзА:**
1я╕ПтГг рж╕ржХрж╛рж▓рзЗ ржШрзБржо ржерзЗржХрзЗ ржЙржарзЗ: 1-2 ржЧрзНрж▓рж╛рж╕
2я╕ПтГг ржкрзНрж░рждрж┐ржЯрж┐ ржЦрж╛ржмрж╛рж░рзЗрж░ ржЖржЧрзЗ: 1 ржЧрзНрж▓рж╛рж╕
3я╕ПтГг ржмрзНржпрж╛ржпрж╝рж╛ржорзЗрж░ рж╕ржоржпрж╝: ржкрзНрж░рждрж┐ 15 ржорж┐ржирж┐ржЯрзЗ
4я╕ПтГг ржШрзБржорж╛рждрзЗ ржпрж╛ржУржпрж╝рж╛рж░ ржЖржЧрзЗ: 1 ржЧрзНрж▓рж╛рж╕

**ржкрж╛ржирж┐ ржкрж╛ржирзЗрж░ ржЙржкржХрж╛рж░рж┐рждрж╛:**
тЬЕ рж╣ржЬржорж╢ржХрзНрждрж┐ ржмрзГржжрзНржзрж┐
тЬЕ рждрзНржмржХ ржЙржЬрзНржЬрзНржмрж▓ ржХрж░рзЗ
тЬЕ рж╢ржХрзНрждрж┐ ржмрзГржжрзНржзрж┐
тЬЕ ржУржЬржи ржХржорж╛рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп
тЬЕ ржЯржХрзНрж╕рж┐ржи ржжрзВрж░ ржХрж░рзЗ

**HealthNest ржП:**
- рж╕рзНржорж╛рж░рзНржЯ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░
- ржжрзИржирж┐ржХ рж▓ржХрзНрж╖рзНржп рж╕рзЗржЯ
- ржкрж╛ржирж┐ ржкрж╛ржирзЗрж░ ржЯрзНрж░рзНржпрж╛ржХ""",
        "response_en": """ЁЯТз **Water Intake Guide**

**Daily Water Requirement:**
- General: Body weight ├Ч 30-35ml
- Example: 70kg тЖТ 2.1-2.5 liters

**Water Drinking Schedule:**
1я╕ПтГг After waking up: 1-2 glasses
2я╕ПтГг Before each meal: 1 glass
3я╕ПтГг During exercise: Every 15 minutes
4я╕ПтГг Before bed: 1 glass

**Benefits of Drinking Water:**
тЬЕ Improves digestion
тЬЕ Glowing skin
тЬЕ Increases energy
тЬЕ Helps weight loss
тЬЕ Removes toxins

**In HealthNest:**
- Smart reminders
- Set daily goals
- Track water intake"""
    },
    
    "sleep": {
        "keywords_bn": ["ржШрзБржо", "ржирж┐ржжрзНрж░рж╛", "ржЗржирж╕ржоржирж┐ржпрж╝рж╛", "ржШрзБржорж╛ржирзЛ"],
        "keywords_en": ["sleep", "insomnia", "rest", "sleeping", "bedtime"],
        "response_bn": """ЁЯШ┤ **рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржШрзБржорзЗрж░ ржЧрж╛ржЗржб**

**ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржШрзБржо:**
- ржкрзНрж░рж╛ржкрзНрждржмржпрж╝рж╕рзНржХ: 7-9 ржШржирзНржЯрж╛
- ржХрж┐рж╢рзЛрж░: 8-10 ржШржирзНржЯрж╛
- рж╢рж┐рж╢рзБ: 10-12 ржШржирзНржЯрж╛

**ржнрж╛рж▓ ржШрзБржорзЗрж░ ржирж┐ржпрж╝ржо:**
1я╕ПтГг ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржоржпрж╝рзЗ ржШрзБржорж╛ржи ржПржмржВ ржУржарзБржи
2я╕ПтГг ржШрзБржорж╛ржирзЛрж░ 2 ржШржирзНржЯрж╛ ржЖржЧрзЗ ржнрж╛рж░рзА ржЦрж╛ржмрж╛рж░ ржЦрж╛ржмрзЗржи ржирж╛
3я╕ПтГг ржШрзБржорж╛ржирзЛрж░ 1 ржШржирзНржЯрж╛ ржЖржЧрзЗ рж╕рзНржХрзНрж░рж┐ржи ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи
4я╕ПтГг рж╢ржпрж╝ржиржХржХрзНрж╖ ржарж╛ржирзНржбрж╛ ржПржмржВ ржЕржирзНржзржХрж╛рж░ рж░рж╛ржЦрзБржи
5я╕ПтГг ржХрзНржпрж╛ржлрзЗржЗржи ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи (ржмрж┐ржХрзЗрж▓ 2ржЯрж╛рж░ ржкрж░)

**ржШрзБржорзЗрж░ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи:**
- ЁЯШ░ **ржЪрж┐ржирзНрждрж╛:** ржзрзНржпрж╛ржи ржХрж░рзБржи, ржЧржнрзАрж░ рж╢рзНржмрж╛рж╕ ржирж┐ржи
- ЁЯУ▒ **ржмрзНрж▓рзБ рж▓рж╛ржЗржЯ:** ржирж╛ржЗржЯ ржорзЛржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи
- тШХ **ржХрзНржпрж╛ржлрзЗржЗржи:** ржжрзБржкрзБрж░рзЗрж░ ржкрж░ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи

**HealthNest ржП:**
- ржШрзБржорзЗрж░ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- рж╕рзНржорж╛рж░рзНржЯ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░
- ржШрзБржорзЗрж░ ржорж╛ржи ржмрж┐рж╢рзНрж▓рзЗрж╖ржг""",
        "response_en": """ЁЯШ┤ **Healthy Sleep Guide**

**Required Sleep:**
- Adults: 7-9 hours
- Teenagers: 8-10 hours
- Children: 10-12 hours

**Good Sleep Habits:**
1я╕ПтГг Sleep and wake at consistent times
2я╕ПтГг No heavy meals 2 hours before bed
3я╕ПтГг Avoid screens 1 hour before bed
4я╕ПтГг Keep bedroom cool and dark
5я╕ПтГг Avoid caffeine (after 2 PM)

**Sleep Problem Solutions:**
- ЁЯШ░ **Anxiety:** Meditate, deep breathing
- ЁЯУ▒ **Blue Light:** Use night mode
- тШХ **Caffeine:** Avoid after noon

**In HealthNest:**
- Sleep tracking
- Smart reminders
- Sleep quality analysis"""
    },
    
    "fitness": {
        "keywords_bn": ["ржмрзНржпрж╛ржпрж╝рж╛ржо", "ржлрж┐ржЯржирзЗрж╕", "ржХрж╕рж░ржд", "ржЬрж┐ржо", "ржУржпрж╝рж╛рж░рзНржХржЖржЙржЯ"],
        "keywords_en": ["exercise", "fitness", "workout", "gym", "training"],
        "response_bn": """ЁЯТк **ржлрж┐ржЯржирзЗрж╕ ржПржмржВ ржмрзНржпрж╛ржпрж╝рж╛ржо**

**рж╕рж╛ржкрзНрждрж╛рж╣рж┐ржХ рж▓ржХрзНрж╖рзНржп:**
- ЁЯПГтАНтЩВя╕П ржХрж╛рж░рзНржбрж┐ржУ: 150 ржорж┐ржирж┐ржЯ (рж╕ржкрзНрждрж╛рж╣рзЗ 5 ржжрж┐ржи ├Ч 30 ржорж┐ржирж┐ржЯ)
- ЁЯПЛя╕П рж╢ржХрзНрждрж┐ ржкрзНрж░рж╢рж┐ржХрзНрж╖ржг: рж╕ржкрзНрждрж╛рж╣рзЗ 2-3 ржжрж┐ржи
- ЁЯзШ ржиржоржирзАржпрж╝рждрж╛: ржкрзНрж░рждрж┐ржжрж┐ржи рж╕рзНржЯрзНрж░рзЗржЪрж┐ржВ

**ржмрзНржпрж╛ржпрж╝рж╛ржорзЗрж░ ржзрж░ржи:**

1я╕ПтГг **ржХрж╛рж░рзНржбрж┐ржУ:**
   - рж╣рж╛ржБржЯрж╛, ржжрзМржбрж╝рж╛ржирзЛ
   - рж╕рж╛ржЗржХрзЗрж▓ ржЪрж╛рж▓рж╛ржирзЛ
   - рж╕рж╛ржБрждрж╛рж░ ржХрж╛ржЯрж╛

2я╕ПтГг **рж╢ржХрзНрждрж┐:**
   - ржкрзБрж╢-ржЖржк, рж╕рзНржХрзЛржпрж╝рж╛ржЯ
   - ржУржЬржи ржЙрждрзНрждрзЛрж▓ржи
   - ржкрзНрж▓рзНржпрж╛ржЩрзНржХ

3я╕ПтГг **ржиржоржирзАржпрж╝рждрж╛:**
   - ржпрзЛржЧржмрзНржпрж╛ржпрж╝рж╛ржо
   - рж╕рзНржЯрзНрж░рзЗржЪрж┐ржВ
   - ржкрж╛ржЗрж▓рзЗржЯрж╕

**рж╢рж┐ржХрзНрж╖рж╛ржиржмрж┐рж╕ рж░рзБржЯрж┐ржи:**
рж╕рзЛржо/ржмрзБржз/рж╢рзБржХрзНрж░: 30 ржорж┐ржирж┐ржЯ ржХрж╛рж░рзНржбрж┐ржУ
ржоржЩрзНржЧрж▓/ржмрзГрж╣рж╕рзНржкрждрж┐: 20 ржорж┐ржирж┐ржЯ рж╢ржХрзНрждрж┐
рж░ржмрж┐: 30 ржорж┐ржирж┐ржЯ ржпрзЛржЧрж╛
рж╢ржирж┐: ржмрж┐рж╢рзНрж░рж╛ржо

**HealthNest ржП:**
- ржзрж╛ржк ржЧржгржирж╛
- ржУржпрж╝рж╛рж░рзНржХржЖржЙржЯ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржмрж╛рж░рзНржи ржЧржгржирж╛""",
        "response_en": """ЁЯТк **Fitness and Exercise**

**Weekly Goals:**
- ЁЯПГтАНтЩВя╕П Cardio: 150 minutes (5 days ├Ч 30 minutes)
- ЁЯПЛя╕П Strength Training: 2-3 days per week
- ЁЯзШ Flexibility: Daily stretching

**Exercise Types:**

1я╕ПтГг **Cardio:**
   - Walking, running
   - Cycling
   - Swimming

2я╕ПтГг **Strength:**
   - Push-ups, squats
   - Weight lifting
   - Planks

3я╕ПтГг **Flexibility:**
   - Yoga
   - Stretching
   - Pilates

**Beginner Routine:**
Mon/Wed/Fri: 30 min cardio
Tue/Thu: 20 min strength
Sun: 30 min yoga
Sat: Rest

**In HealthNest:**
- Step counter
- Workout tracking
- Calorie burn calculation"""
    },
    
    "pregnancy": {
        "keywords_bn": ["ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛", "ржЧрж░рзНржнржмрждрзА", "ржорж╛", "рж╢рж┐рж╢рзБ", "ржкрзНрж░рзЗржЧржирзЗржирзНрж╕рж┐"],
        "keywords_en": ["pregnancy", "pregnant", "mother", "baby", "trimester"],
        "response_bn": """ЁЯд░ **ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ**

**рждрзНрж░рзИржорж╛рж╕рж┐ржХ ржЕржирзБржпрж╛ржпрж╝рзА ржпрждрзНржи:**

**ржкрзНрж░ржержо рждрзНрж░рзИржорж╛рж╕рж┐ржХ (1-12 рж╕ржкрзНрждрж╛рж╣):**
- ЁЯй║ ржлрж▓рж┐ржХ ржПрж╕рж┐ржб (400-800 mcg/ржжрж┐ржи)
- ЁЯдв ржмржорж┐ ржмржорж┐ ржнрж╛ржм: ржЫрзЛржЯ, ржШржи ржШржи ржЦрж╛ржмрж╛рж░
- ЁЯШ┤ ржмрзЗрж╢рж┐ ржмрж┐рж╢рзНрж░рж╛ржо ржирж┐ржи

**ржжрзНржмрж┐рждрзАржпрж╝ рждрзНрж░рзИржорж╛рж╕рж┐ржХ (13-28 рж╕ржкрзНрждрж╛рж╣):**
- ЁЯеЧ ржкрзНрж░рзЛржЯрж┐ржи ржмрж╛ржбрж╝рж╛ржи (+25g/ржжрж┐ржи)
- ЁЯТК ржЖржпрж╝рж░ржи рж╕рж╛ржкрзНрж▓рж┐ржорзЗржирзНржЯ
- ЁЯПГтАНтЩАя╕П рж╣рж╛рж▓ржХрж╛ ржмрзНржпрж╛ржпрж╝рж╛ржо (ржпрзЛржЧ, рж╣рж╛ржБржЯрж╛)

**рждрзГрждрзАржпрж╝ рждрзНрж░рзИржорж╛рж╕рж┐ржХ (29-40 рж╕ржкрзНрждрж╛рж╣):**
- ЁЯТз ржмрзЗрж╢рж┐ ржкрж╛ржирж┐ ржкрж╛ржи (3-4 рж▓рж┐ржЯрж╛рж░)
- ЁЯеЫ ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо (1000-1300 mg)
- ЁЯШ┤ ржмрж╛ржо ржкрж╛рж╢рзЗ рж╢рзБржпрж╝рзЗ ржерж╛ржХрзБржи

**ржкрзБрж╖рзНржЯрж┐ ржкрзНрж░ржпрж╝рзЛржЬржи:**
- ржХрзНржпрж╛рж▓рзЛрж░рж┐: +300-500/ржжрж┐ржи
- ржкрзНрж░рзЛржЯрж┐ржи: 70-100g/ржжрж┐ржи
- ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо: 1000mg/ржжрж┐ржи
- ржЖржпрж╝рж░ржи: 27mg/ржжрж┐ржи

**HealthNest ржП:**
- рж╕ржкрзНрждрж╛рж╣ ржЕржирзБржпрж╛ржпрж╝рзА рждржерзНржп
- ржкрзБрж╖рзНржЯрж┐ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- ржирж┐ржпрж╝ржорж┐ржд ржЪрзЗржХржЖржк рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░""",
        "response_en": """ЁЯд░ **Pregnancy Tracking**

**Care by Trimester:**

**First Trimester (1-12 weeks):**
- ЁЯй║ Folic Acid (400-800 mcg/day)
- ЁЯдв Nausea: Small, frequent meals
- ЁЯШ┤ Get extra rest

**Second Trimester (13-28 weeks):**
- ЁЯеЧ Increase protein (+25g/day)
- ЁЯТК Iron supplements
- ЁЯПГтАНтЩАя╕П Light exercise (yoga, walking)

**Third Trimester (29-40 weeks):**
- ЁЯТз More water (3-4 liters)
- ЁЯеЫ Calcium (1000-1300 mg)
- ЁЯШ┤ Sleep on left side

**Nutritional Needs:**
- Calories: +300-500/day
- Protein: 70-100g/day
- Calcium: 1000mg/day
- Iron: 27mg/day

**In HealthNest:**
- Week-by-week info
- Nutrition tracking
- Regular checkup reminders"""
    },
    
    "womens_health": {
        "keywords_bn": ["ржорж╣рж┐рж▓рж╛", "ржкрж┐рж░рж┐ржпрж╝ржб", "ржорж╛рж╕рж┐ржХ", "pcos", "рж░ржЬржГржирж┐ржмрзГрждрзНрждрж┐", "ржорзЗржирзЛржкржЬ"],
        "keywords_en": ["women", "period", "menstruation", "pcos", "menopause"],
        "response_bn": """ЁЯСй **ржорж╣рж┐рж▓рж╛ рж╕рзНржмрж╛рж╕рзНржерзНржп**

**ЁЯй╕ ржкрж┐рж░рж┐ржпрж╝ржб ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛:**
- ржЪржХрзНрж░: 21-35 ржжрж┐ржи (ржЧржбрж╝ 28)
- рж╕ржоржпрж╝ржХрж╛рж▓: 2-7 ржжрж┐ржи
- ржмрзНржпржерж╛ ржЙржкрж╢ржо: ржЧрж░ржо рж╕рзЗржБржХ, ржорзНржпрж╛ржЧржирзЗрж╕рж┐ржпрж╝рж╛ржо
- ржкрзБрж╖рзНржЯрж┐: ржЖржпрж╝рж░ржи рж╕ржорзГржжрзНржз ржЦрж╛ржмрж╛рж░

**ЁЯМ╕ PCOS (ржкрж▓рж┐рж╕рж┐рж╕рзНржЯрж┐ржХ ржУржнрж╛рж░рж┐):**
- ржУржЬржи ржирж┐ржпрж╝ржирзНрждрзНрж░ржг (5-10% ржХржорж╛ржи)
- ржХржо ржХрж╛рж░рзНржм ржбрж╛ржпрж╝рзЗржЯ
- ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржпрж╝рж╛ржо (30 ржорж┐ржирж┐ржЯ/ржжрж┐ржи)
- ржорж╛ржирж╕рж┐ржХ ржЪрж╛ржк ржХржорж╛ржи

**ЁЯМЩ ржорзЗржирзЛржкржЬ (45-55 ржмржЫрж░):**
- ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо: 1200mg/ржжрж┐ржи
- ржнрж┐ржЯрж╛ржорж┐ржи ржбрж┐: 800-1000 IU
- ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржпрж╝рж╛ржо
- рж╕ржпрж╝рж╛ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи

**тЪая╕П ржбрж╛ржХрзНрждрж╛рж░ ржжрзЗржЦрж╛ржи ржпржЦржи:**
- ржЕрждрж┐рж░рж┐ржХрзНржд рж░ржХрзНрждржкрж╛ржд
- 35 ржжрж┐ржирзЗрж░ ржмрзЗрж╢рж┐ ржжрзЗрж░рж┐
- рждрзАржмрзНрж░ ржмрзНржпржерж╛
- ржЕрж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ рж╕рзНрж░рж╛ржм

**HealthNest ржП:**
- ржкрж┐рж░рж┐ржпрж╝ржб ржЯрзНрж░рзНржпрж╛ржХрж╛рж░
- ржЙрж░рзНржмрж░рждрж╛ ржХрзНржпрж╛рж▓рзЗржирзНржбрж╛рж░
- PCOS ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛ ржЯрж┐ржкрж╕""",
        "response_en": """ЁЯСй **Women's Health**

**ЁЯй╕ Period Management:**
- Cycle: 21-35 days (avg 28)
- Duration: 2-7 days
- Pain relief: Heat pads, magnesium
- Nutrition: Iron-rich foods

**ЁЯМ╕ PCOS (Polycystic Ovary):**
- Weight control (lose 5-10%)
- Low carb diet
- Regular exercise (30 min/day)
- Reduce stress

**ЁЯМЩ Menopause (45-55 years):**
- Calcium: 1200mg/day
- Vitamin D: 800-1000 IU
- Regular exercise
- Eat soy foods

**тЪая╕П See Doctor When:**
- Heavy bleeding
- Delay over 35 days
- Severe pain
- Abnormal discharge

**In HealthNest:**
- Period tracker
- Fertility calendar
- PCOS management tips"""
    },
    
    "medicine": {
        "keywords_bn": ["ржФрж╖ржз", "ржУрж╖рзБржз", "рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░", "ржбрзЛржЬ", "ржорзЗржбрж┐рж╕рж┐ржи"],
        "keywords_en": ["medicine", "medication", "reminder", "dose", "drug", "pill"],
        "response_bn": """ЁЯТК **ржФрж╖ржз ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛**

**ржФрж╖ржз ржЦрж╛ржУржпрж╝рж╛рж░ ржирж┐ржпрж╝ржо:**

**тП░ рж╕ржоржпрж╝ржорждрзЛ:**
- ржЦрж╛рж▓рж┐ ржкрзЗржЯрзЗ: ржЦрж╛ржмрж╛рж░рзЗрж░ 1 ржШржирзНржЯрж╛ ржЖржЧрзЗ ржмрж╛ 2 ржШржирзНржЯрж╛ ржкрж░рзЗ
- ржЦрж╛ржмрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ: ржЦрж╛ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ ржмрж╛ ржкрж░ржкрж░ржЗ
- ржЦрж╛ржмрж╛рж░рзЗрж░ ржЖржЧрзЗ: 30 ржорж┐ржирж┐ржЯ ржЖржЧрзЗ
- рж╢рзЛржпрж╝рж╛рж░ ржЖржЧрзЗ: ржШрзБржорж╛рждрзЗ ржпрж╛ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝

**ЁЯТз ржкрж╛ржирж┐:**
- ржкрзВрж░рзНржг ржПржХ ржЧрзНрж▓рж╛рж╕ ржкрж╛ржирж┐ ржжрж┐ржпрж╝рзЗ ржЦрж╛ржи
- ржЯрзНржпрж╛ржмрж▓рзЗржЯ ржЪрзВрж░рзНржг ржХрж░ржмрзЗржи ржирж╛ (ржпржжрж┐ ржирж╛ ржмрж▓рж╛ рж╣ржпрж╝)

**тЪая╕П рж╕рждрж░рзНржХрждрж╛:**
- ржбржмрж▓ ржбрзЛржЬ ржирзЗржмрзЗржи ржирж╛ (ржорж┐рж╕ ржХрж░рж▓рзЗржУ)
- ржорзЗржпрж╝рж╛ржж ржЪрзЗржХ ржХрж░рзБржи
- рж╕ржарж┐ржХ рждрж╛ржкржорж╛рждрзНрж░рж╛ржпрж╝ рж░рж╛ржЦрзБржи
- рж╢рж┐рж╢рзБржжрзЗрж░ ржирж╛ржЧрж╛рж▓рзЗрж░ ржмрж╛ржЗрж░рзЗ рж░рж╛ржЦрзБржи

**ЁЯФД ржорж┐ржерж╕рзНржХрзНрж░рж┐ржпрж╝рж╛ ржПржбрж╝рж╛ржи:**
- ржПржХрж╕рж╛ржерзЗ ржЕржирзЗржХ ржФрж╖ржз ржирзЗржмрзЗржи ржирж╛
- ржбрж╛ржХрзНрждрж╛рж░ржХрзЗ рж╕ржм ржФрж╖ржз ржЬрж╛ржирж╛ржи
- ржЕрзНржпрж╛рж▓ржХрзЛрж╣рж▓ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи

**HealthNest ржП:**
- рж╕рзНржорж╛рж░рзНржЯ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░
- ржбрзЛржЬ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- ржУрж╖рзБржзрзЗрж░ ржорж┐ржерж╕рзНржХрзНрж░рж┐ржпрж╝рж╛ рж╕рждрж░рзНржХрждрж╛
- ржорзЗржпрж╝рж╛ржж рж╢рзЗрж╖ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи""",
        "response_en": """ЁЯТК **Medicine Management**

**Medicine Taking Rules:**

**тП░ Timing:**
- Empty stomach: 1 hour before or 2 hours after meals
- With food: During or right after eating
- Before meals: 30 minutes before
- Before bed: At bedtime

**ЁЯТз Water:**
- Take with full glass of water
- Don't crush tablets (unless told)

**тЪая╕П Precautions:**
- Don't double dose (even if missed)
- Check expiry date
- Store at correct temperature
- Keep away from children

**ЁЯФД Avoid Interactions:**
- Don't take many medicines together
- Tell doctor about all medicines
- Avoid alcohol

**In HealthNest:**
- Smart reminders
- Dose tracking
- Drug interaction alerts
- Expiry notifications"""
    },
    
    "blood_pressure": {
        "keywords_bn": ["рж░ржХрзНрждржЪрж╛ржк", "bp", "рж╣рж╛ржЗ ржкрзНрж░рзЗрж╢рж╛рж░", "рж▓рзЛ ржкрзНрж░рзЗрж╢рж╛рж░", "рж╣рж╛ржЗржкрж╛рж░ржЯрзЗржирж╢ржи"],
        "keywords_en": ["blood pressure", "bp", "high pressure", "low pressure", "hypertension"],
        "response_bn": """ЁЯй╕ **рж░ржХрзНрждржЪрж╛ржк ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛**

**рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ ржорж╛рждрзНрж░рж╛:**
- ЁЯЯв рж╕рзБрж╕рзНрже: 120/80 mmHg
- ЁЯЯб ржЙржЪрзНржЪ: 130-139/80-89
- ЁЯФ┤ рж╣рж╛ржЗржкрж╛рж░ржЯрзЗржирж╢ржи: 140/90+

**ржЙржЪрзНржЪ рж░ржХрзНрждржЪрж╛ржк ржХржорж╛рждрзЗ:**

1я╕ПтГг **ржЦрж╛ржжрзНржп ржкрж░рж┐ржмрж░рзНрждржи:**
   - рж▓ржмржг ржХржорж╛ржи (<5g/ржжрж┐ржи)
   - ржкржЯрж╛рж╕рж┐ржпрж╝рж╛ржо ржмрж╛ржбрж╝рж╛ржи (ржХрж▓рж╛, ржЖрж▓рзБ)
   - DASH ржбрж╛ржпрж╝рзЗржЯ ржЕржирзБрж╕рж░ржг ржХрж░рзБржи

2я╕ПтГг **ржЬрзАржмржиржпрж╛ржкржи:**
   - ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржпрж╝рж╛ржо (30 ржорж┐ржирж┐ржЯ/ржжрж┐ржи)
   - ржУржЬржи ржХржорж╛ржи (10% ржХржорж╛ржи)
   - ржоржжрзНржпржкрж╛ржи ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи
   - ржзрзВржоржкрж╛ржи ржЫрзЗржбрж╝рзЗ ржжрж┐ржи

3я╕ПтГг **ржорж╛ржирж╕рж┐ржХ ржЪрж╛ржк:**
   - ржзрзНржпрж╛ржи, ржпрзЛржЧржмрзНржпрж╛ржпрж╝рж╛ржо
   - ржкрж░рзНржпрж╛ржкрзНржд ржШрзБржо
   - рж╢рзНржмрж╛рж╕-ржкрзНрж░рж╢рзНржмрж╛рж╕рзЗрж░ ржмрзНржпрж╛ржпрж╝рж╛ржо

4я╕ПтГг **ржирж┐ржпрж╝ржорж┐ржд ржкрж░рзНржпржмрзЗржХрзНрж╖ржг:**
   - ржжрж┐ржирзЗ 2 ржмрж╛рж░ ржорж╛ржкрзБржи
   - ржПржХржЗ рж╕ржоржпрж╝рзЗ ржорж╛ржкрзБржи
   - рж░рзЗржХрж░рзНржб рж░рж╛ржЦрзБржи

**HealthNest ржП:**
- BP ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржЪрж╛рж░рзНржЯ
- рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░
- ржкрзНрж░ржмржгрждрж╛ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг""",
        "response_en": """ЁЯй╕ **Blood Pressure Management**

**Normal Levels:**
- ЁЯЯв Healthy: 120/80 mmHg
- ЁЯЯб Elevated: 130-139/80-89
- ЁЯФ┤ Hypertension: 140/90+

**Lowering High BP:**

1я╕ПтГг **Diet Changes:**
   - Reduce salt (<5g/day)
   - Increase potassium (banana, potato)
   - Follow DASH diet

2я╕ПтГг **Lifestyle:**
   - Regular exercise (30 min/day)
   - Lose weight (reduce 10%)
   - Avoid alcohol
   - Quit smoking

3я╕ПтГг **Stress:**
   - Meditation, yoga
   - Adequate sleep
   - Breathing exercises

4я╕ПтГг **Regular Monitoring:**
   - Measure 2 times daily
   - Same time each day
   - Keep records

**In HealthNest:**
- BP tracking charts
- Reminders
- Trend analysis"""
    },
    
    "diabetes": {
        "keywords_bn": ["ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕", "рж░ржХрзНрждрзЗ рж╢рж░рзНржХрж░рж╛", "рж╕рзБржЧрж╛рж░", "ржЗржирж╕рзБрж▓рж┐ржи"],
        "keywords_en": ["diabetes", "blood sugar", "glucose", "insulin"],
        "response_bn": """ЁЯй╕ **ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛**

**рж░ржХрзНрждрзЗ рж╢рж░рзНржХрж░рж╛рж░ ржорж╛рждрзНрж░рж╛:**
- ЁЯЯв ржЦрж╛рж▓рж┐ ржкрзЗржЯрзЗ: 70-100 mg/dL
- ЁЯЯб ржкрзНрж░рж┐-ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕: 100-125
- ЁЯФ┤ ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕: 126+

**ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЙржкрж╛ржпрж╝:**

1я╕ПтГг **ржЦрж╛ржжрзНржп ржирж┐ржпрж╝ржирзНрждрзНрж░ржг:**
   - ржХржоржкрзНрж▓рзЗржХрзНрж╕ ржХрж╛рж░рзНржм ржмрзЗржЫрзЗ ржирж┐ржи
   - ржЪрж┐ржирж┐ ржПржбрж╝рж┐ржпрж╝рзЗ ржЪрж▓рзБржи
   - ржлрж╛ржЗржмрж╛рж░ ржмрж╛ржбрж╝рж╛ржи (25-30g/ржжрж┐ржи)
   - ржЫрзЛржЯ, ржШржи ржШржи ржЦрж╛ржмрж╛рж░

2я╕ПтГг **рж╢рж╛рж░рзАрж░рж┐ржХ ржХрж╛рж░рзНржпржХрж▓рж╛ржк:**
   - ржжрзИржирж┐ржХ 30-45 ржорж┐ржирж┐ржЯ рж╣рж╛ржБржЯрж╛
   - рж╕ржкрзНрждрж╛рж╣рзЗ 150 ржорж┐ржирж┐ржЯ ржмрзНржпрж╛ржпрж╝рж╛ржо
   - рж╢ржХрзНрждрж┐ ржкрзНрж░рж╢рж┐ржХрзНрж╖ржг (2 ржжрж┐ржи/рж╕ржкрзНрждрж╛рж╣)

3я╕ПтГг **ржУржЬржи ржирж┐ржпрж╝ржирзНрждрзНрж░ржг:**
   - 5-7% ржУржЬржи ржХржорж╛ржи
   - BMI < 25 рж░рж╛ржЦрзБржи
   - ржкрзЗржЯрзЗрж░ ржЪрж░рзНржмрж┐ ржХржорж╛ржи

4я╕ПтГг **рж▓ржХрзНрж╖ржг ржЪрж┐ржирзБржи:**
   - ржЕрждрж┐рж░рж┐ржХрзНржд рждрзГрж╖рзНржгрж╛
   - ржШржи ржШржи ржкрзНрж░рж╕рзНрж░рж╛ржм
   - ржХрзНрж▓рж╛ржирзНрждрж┐, ржЭрж╛ржкрж╕рж╛ ржжрзГрж╖рзНржЯрж┐

**HealthNest ржП:**
- ржЧрзНрж▓рзБржХрзЛржЬ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- ржЦрж╛ржмрж╛рж░ рж▓ржЧ
- HbA1c ржоржирж┐ржЯрж░рж┐ржВ""",
        "response_en": """ЁЯй╕ **Diabetes Management**

**Blood Sugar Levels:**
- ЁЯЯв Fasting: 70-100 mg/dL
- ЁЯЯб Pre-diabetes: 100-125
- ЁЯФ┤ Diabetes: 126+

**Prevention Methods:**

1я╕ПтГг **Diet Control:**
   - Choose complex carbs
   - Avoid sugar
   - Increase fiber (25-30g/day)
   - Small, frequent meals

2я╕ПтГг **Physical Activity:**
   - Daily 30-45 min walking
   - 150 min exercise/week
   - Strength training (2 days/week)

3я╕ПтГг **Weight Control:**
   - Lose 5-7% weight
   - Keep BMI < 25
   - Reduce belly fat

4я╕ПтГг **Know Symptoms:**
   - Excessive thirst
   - Frequent urination
   - Fatigue, blurry vision

**In HealthNest:**
- Glucose tracking
- Food logging
- HbA1c monitoring"""
    },
    
    "mental_health": {
        "keywords_bn": ["ржорж╛ржирж╕рж┐ржХ", "ржЪрж╛ржк", "ржжрзБрж╢рзНржЪрж┐ржирзНрждрж╛", "ржмрж┐рж╖ржгрзНржирждрж╛", "рж╕рзНржЯрзНрж░рзЗрж╕"],
        "keywords_en": ["mental", "stress", "anxiety", "depression", "mood"],
        "response_bn": """ЁЯза **ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп**

**ржорж╛ржирж╕рж┐ржХ ржЪрж╛ржк ржХржорж╛рждрзЗ:**

1я╕ПтГг **ржзрзНржпрж╛ржи ржПржмржВ рж╢рж┐ржерж┐рж▓рждрж╛:**
   - ржкрзНрж░рждрж┐ржжрж┐ржи 10-15 ржорж┐ржирж┐ржЯ ржзрзНржпрж╛ржи
   - ржЧржнрзАрж░ рж╢рзНржмрж╛рж╕-ржкрзНрж░рж╢рзНржмрж╛рж╕ (4-7-8 ржкржжрзНржзрждрж┐)
   - ржкрзНрж░ржЧрждрж┐рж╢рзАрж▓ ржкрзЗрж╢рзА рж╢рж┐ржерж┐рж▓ржХрж░ржг

2я╕ПтГг **рж╢рж╛рж░рзАрж░рж┐ржХ ржХрж╛рж░рзНржпржХрж▓рж╛ржк:**
   - ржпрзЛржЧржмрзНржпрж╛ржпрж╝рж╛ржо, рждрж╛ржЗ ржЪрж┐
   - ржжрзИржирж┐ржХ 30 ржорж┐ржирж┐ржЯ рж╣рж╛ржБржЯрж╛
   - ржкрзНрж░ржХрзГрждрж┐рждрзЗ рж╕ржоржпрж╝ ржХрж╛ржЯрж╛ржи

3я╕ПтГг **рж╕рж╛ржорж╛ржЬрж┐ржХ рж╕ржВржпрзЛржЧ:**
   - ржкрж░рж┐ржмрж╛рж░ ржПржмржВ ржмржирзНржзрзБржжрзЗрж░ рж╕рж╛ржерзЗ ржХржерж╛ ржмрж▓рзБржи
   - рж╕рж╣рж╛ржпрж╝рждрж╛ ржЧрзНрж░рзБржкрзЗ ржпрзЛржЧ ржжрж┐ржи
   - рж╢ржЦ ржПржмржВ ржЖржЧрзНрж░рж╣ ржЕржирзБрж╕рж░ржг ржХрж░рзБржи

4я╕ПтГг **ржЬрзАржмржиржпрж╛ржкржирзЗрж░ ржкрж░рж┐ржмрж░рзНрждржи:**
   - ржкрж░рзНржпрж╛ржкрзНржд ржШрзБржо (7-9 ржШржирзНржЯрж╛)
   - ржХрзНржпрж╛ржлрзЗржЗржи ржПржмржВ ржЕрзНржпрж╛рж▓ржХрзЛрж╣рж▓ рж╕рзАржорж┐ржд ржХрж░рзБржи
   - рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи

**тЪая╕П рж╕рж╛рж╣рж╛ржпрзНржп ржирж┐ржи ржпржЦржи:**
- ржжрзАрж░рзНржШрж╕рзНржерж╛ржпрж╝рзА ржжрзБржГржЦ (2+ рж╕ржкрзНрждрж╛рж╣)
- ржЖрждрзНржорж╣рждрзНржпрж╛рж░ ржЪрж┐ржирзНрждрж╛
- ржжрзИржиржирзНржжрж┐ржи ржХрж╛ржЬрзЗ ржЕржХрзНрж╖ржорждрж╛

**HealthNest ржП:**
- ржорзБржб ржЯрзНрж░рзНржпрж╛ржХрж╛рж░
- ржзрзНржпрж╛ржи ржЧрж╛ржЗржб
- рж╕рзНржЯрзНрж░рзЗрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржЯрж┐ржкрж╕""",
        "response_en": """ЁЯза **Mental Health**

**Reducing Stress:**

1я╕ПтГг **Meditation & Relaxation:**
   - Daily 10-15 min meditation
   - Deep breathing (4-7-8 method)
   - Progressive muscle relaxation

2я╕ПтГг **Physical Activity:**
   - Yoga, tai chi
   - Daily 30 min walking
   - Spend time in nature

3я╕ПтГг **Social Connection:**
   - Talk to family and friends
   - Join support groups
   - Pursue hobbies and interests

4я╕ПтГг **Lifestyle Changes:**
   - Adequate sleep (7-9 hours)
   - Limit caffeine and alcohol
   - Eat healthy foods

**тЪая╕П Seek Help When:**
- Persistent sadness (2+ weeks)
- Suicidal thoughts
- Unable to do daily tasks

**In HealthNest:**
- Mood tracker
- Meditation guide
- Stress management tips"""
    },
    
    "health_diary": {
        "keywords_bn": ["ржбрж╛ржпрж╝рзЗрж░рж┐", "ржирзЛржЯ", "ржЙржкрж╕рж░рзНржЧ", "рж░рзЗржХрж░рзНржб"],
        "keywords_en": ["diary", "notes", "symptoms", "record", "journal"],
        "response_bn": """ЁЯУФ **рж╕рзНржмрж╛рж╕рзНржерзНржп ржбрж╛ржпрж╝рзЗрж░рж┐**

**ржХрж┐ рж░рзЗржХрж░рзНржб ржХрж░ржмрзЗржи:**

1я╕ПтГг **ржжрзИржирж┐ржХ ржорзЗржЯрзНрж░рж┐ржХрзНрж╕:**
   - ржУржЬржи, рж░ржХрзНрждржЪрж╛ржк
   - рж░ржХрзНрждрзЗ рж╢рж░рзНржХрж░рж╛
   - рж╣рзГржжрж╕рзНржкржирзНржжржи
   - ржШрзБржорзЗрж░ ржШржирзНржЯрж╛

2я╕ПтГг **ржЙржкрж╕рж░рзНржЧ:**
   - ржмрзНржпржерж╛ (рж╕рзНржерж╛ржи, рждрзАржмрзНрж░рждрж╛)
   - ржХрзНрж▓рж╛ржирзНрждрж┐, ржорж╛ржерж╛ржмрзНржпржерж╛
   - рж╣ржЬржо рж╕ржорж╕рзНржпрж╛
   - ржорзЗржЬрж╛ржЬ ржкрж░рж┐ржмрж░рзНрждржи

3я╕ПтГг **ржЦрж╛ржмрж╛рж░ ржПржмржВ ржкрж╛ржирзАржпрж╝:**
   - ржЦрж╛ржУржпрж╝рж╛ ржЦрж╛ржмрж╛рж░
   - ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржЧржгржирж╛
   - ржкрж╛ржирж┐ ржкрж╛ржи
   - ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ ржирзЛржЯ ржХрж░рзБржи

4я╕ПтГг **ржФрж╖ржз:**
   - ржирзЗржУржпрж╝рж╛ ржФрж╖ржз
   - рж╕ржоржпрж╝ ржПржмржВ ржбрзЛржЬ
   - ржкрж╛рж░рзНрж╢рзНржм ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛

5я╕ПтГг **ржХрж╛рж░рзНржпржХрж▓рж╛ржк:**
   - ржмрзНржпрж╛ржпрж╝рж╛ржо
   - ржзрж╛ржк ржЧржгржирж╛
   - рж╢рж╛рж░рзАрж░рж┐ржХ ржХрж╛ржЬ

**ржЙржкржХрж╛рж░рж┐рждрж╛:**
тЬЕ ржкрзНржпрж╛ржЯрж╛рж░рзНржи ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзБржи
тЬЕ ржЯрзНрж░рж┐ржЧрж╛рж░ ржЦрзБржБржЬрзЗ ржкрж╛ржи
тЬЕ ржбрж╛ржХрзНрждрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржнрж╛ржЧ ржХрж░рзБржи
тЬЕ ржЕржЧрзНрж░ржЧрждрж┐ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзБржи

**HealthNest ржП:**
- рж╕рж╣ржЬ ржирзЛржЯ ржирзЗржУржпрж╝рж╛
- ржЫржмрж┐ рж╕ржВржпрзБржХрзНрждрж┐
- рж░рж┐ржкрзЛрж░рзНржЯ ржЬрзЗржирж╛рж░рзЗрж╢ржи""",
        "response_en": """ЁЯУФ **Health Diary**

**What to Record:**

1я╕ПтГг **Daily Metrics:**
   - Weight, blood pressure
   - Blood sugar
   - Heart rate
   - Sleep hours

2я╕ПтГг **Symptoms:**
   - Pain (location, severity)
   - Fatigue, headaches
   - Digestive issues
   - Mood changes

3я╕ПтГг **Food & Drink:**
   - Meals eaten
   - Calorie count
   - Water intake
   - Note reactions

4я╕ПтГг **Medications:**
   - Medicines taken
   - Time and dose
   - Side effects

5я╕ПтГг **Activity:**
   - Exercise
   - Step count
   - Physical work

**Benefits:**
тЬЕ Identify patterns
тЬЕ Find triggers
тЬЕ Share with doctor
тЬЕ Track progress

**In HealthNest:**
- Easy note taking
- Photo attachments
- Report generation"""
    },
    
    "family_health": {
        "keywords_bn": ["ржкрж░рж┐ржмрж╛рж░", "ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп", "рж╢рж┐рж╢рзБ", "ржмржпрж╝рж╕рзНржХ"],
        "keywords_en": ["family", "family health", "children", "elderly", "kids"],
        "response_bn": """ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж **ржкрж░рж┐ржмрж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛**

**рж╕ржХрж▓рзЗрж░ ржЬржирзНржп:**

1я╕ПтГг **рж╢рж┐рж╢рзБ (0-12 ржмржЫрж░):**
   - ржЯрж┐ржХрж╛ рж╕ржоржпрж╝рж╕рзВржЪрзА
   - ржмрзГржжрзНржзрж┐ ржоржирж┐ржЯрж░рж┐ржВ
   - ржкрзБрж╖рзНржЯрж┐ ржкрж░рж┐ржХрж▓рзНржкржирж╛
   - ржШрзБржорзЗрж░ рж░рзБржЯрж┐ржи

2я╕ПтГг **ржХрж┐рж╢рзЛрж░ (13-18 ржмржЫрж░):**
   - рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржЦрж╛ржмрж╛рж░рзЗрж░ ржЕржнрзНржпрж╛рж╕
   - рж╢рж╛рж░рзАрж░рж┐ржХ ржХрж╛рж░рзНржпржХрж▓рж╛ржк
   - ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп
   - ржирж┐ржпрж╝ржорж┐ржд ржЪрзЗржХржЖржк

3я╕ПтГг **ржкрзНрж░рж╛ржкрзНрждржмржпрж╝рж╕рзНржХ (19-64 ржмржЫрж░):**
   - ржмрж╛рж░рзНрж╖рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп ржкрж░рзАржХрзНрж╖рж╛
   - ржУржЬржи ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
   - ржжрзАрж░рзНржШрж╕рзНржерж╛ржпрж╝рзА рж░рзЛржЧ ржкрзНрж░рждрж┐рж░рзЛржз
   - рж╕рзНржЯрзНрж░рзЗрж╕ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ

4я╕ПтГг **ржмржпрж╝рж╕рзНржХ (65+ ржмржЫрж░):**
   - ржФрж╖ржз ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
   - ржкрждржи ржкрзНрж░рждрж┐рж░рзЛржз
   - рж╣рж╛ржбрж╝рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп
   - ржирж┐ржпрж╝ржорж┐ржд ржкрж░рзАржХрзНрж╖рж╛

**ржкрж░рж┐ржмрж╛рж░ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ:**
- ржкрзНрж░рждрж┐ржЯрж┐ рж╕ржжрж╕рзНржпрзЗрж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓
- рж╢рзЗржпрж╝рж╛рж░ ржХрж░рж╛ ржХрзНржпрж╛рж▓рзЗржирзНржбрж╛рж░
- ржбрж╛ржХрзНрждрж╛рж░ ржЕрзНржпрж╛ржкржпрж╝рзЗржирзНржЯржорзЗржирзНржЯ
- ржорзЗржбрж┐ржХрзНржпрж╛рж▓ ржЗрждрж┐рж╣рж╛рж╕

**HealthNest ржП:**
- ржПржХрж╛ржзрж┐ржХ ржкрзНрж░рзЛржлрж╛ржЗрж▓
- ржкрж░рж┐ржмрж╛рж░ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб
- рж╢рзЗржпрж╝рж╛рж░ ржХрж░рж╛ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░""",
        "response_en": """ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж **Family Health Management**

**For Everyone:**

1я╕ПтГг **Children (0-12 years):**
   - Vaccination schedule
   - Growth monitoring
   - Nutrition planning
   - Sleep routine

2я╕ПтГг **Teenagers (13-18 years):**
   - Healthy eating habits
   - Physical activity
   - Mental health
   - Regular checkups

3я╕ПтГг **Adults (19-64 years):**
   - Annual health exams
   - Weight management
   - Chronic disease prevention
   - Stress management

4я╕ПтГг **Elderly (65+ years):**
   - Medicine tracking
   - Fall prevention
   - Bone health
   - Regular screenings

**Family Tracking:**
- Each member's profile
- Shared calendar
- Doctor appointments
- Medical history

**In HealthNest:**
- Multiple profiles
- Family dashboard
- Shared reminders"""
    }
}

# ==================== CALCULATION FUNCTIONS ====================

def calculate_bmi(weight_kg, height_m):
    """Calculate BMI"""
    return round(weight_kg / (height_m ** 2), 2)

def calculate_bmr(weight_kg, height_cm, age, gender):
    """Calculate Basal Metabolic Rate"""
    if gender.lower() == 'male':
        return 10 * weight_kg + 6.25 * height_cm - 5 * age + 5
    else:
        return 10 * weight_kg + 6.25 * height_cm - 5 * age - 161

def calculate_tdee(bmr, activity_level):
    """Calculate Total Daily Energy Expenditure"""
    multipliers = {
        'sedentary': 1.2,
        'light': 1.375,
        'moderate': 1.55,
        'active': 1.725,
        'very_active': 1.9
    }
    return round(bmr * multipliers.get(activity_level, 1.2))

def calculate_water_intake(weight_kg):
    """Calculate daily water requirement in liters"""
    return round((weight_kg * 35) / 1000, 1)

# ==================== TOPIC MATCHING FUNCTION ====================

def find_best_match(question, language='bn'):
    """Find the best matching health topic based on keywords"""
    question_lower = question.lower()
    
    # Check each topic
    for topic, data in HEALTH_KNOWLEDGE.items():
        keywords_key = f'keywords_{language}'
        if keywords_key in data:
            # Check if any keyword matches
            for keyword in data[keywords_key]:
                if keyword.lower() in question_lower:
                    response_key = f'response_{language}'
                    return data.get(response_key, data.get('response_bn', ''))
    
    # Default response if no match found
    if language == 'bn':
        return """ржжрзБржГржЦрж┐ржд, ржЖржорж┐ ржПржЗ ржкрзНрж░рж╢рзНржирзЗрж░ ржЙрждрзНрждрж░ ржжрж┐рждрзЗ ржкрж╛рж░ржЫрж┐ ржирж╛ред 

ржЖржкржирж┐ ржЖржорж╛ржХрзЗ ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:
- HealthNest ржЕрзНржпрж╛ржк рж╕ржорзНржкрж░рзНржХрзЗ
- BMI ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░
- ржУржЬржи ржХржорж╛ржирзЛ
- ржкрзБрж╖рзНржЯрж┐ ржПржмржВ ржЦрж╛ржмрж╛рж░
- ржкрж╛ржирж┐ ржкрж╛ржи
- ржШрзБржо
- ржмрзНржпрж╛ржпрж╝рж╛ржо ржПржмржВ ржлрж┐ржЯржирзЗрж╕
- ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛
- ржорж╣рж┐рж▓рж╛ рж╕рзНржмрж╛рж╕рзНржерзНржп
- ржФрж╖ржз ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛
- рж░ржХрзНрждржЪрж╛ржк
- ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕
- ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп
- рж╕рзНржмрж╛рж╕рзНржерзНржп ржбрж╛ржпрж╝рзЗрж░рж┐
- ржкрж░рж┐ржмрж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп"""
    else:
        return """Sorry, I couldn't find an answer to that question.

You can ask me about:
- HealthNest app
- BMI calculator
- Weight loss
- Nutrition and food
- Water intake
- Sleep
- Exercise and fitness
- Pregnancy
- Women's health
- Medicine management
- Blood pressure
- Diabetes
- Mental health
- Health diary
- Family health"""

# ==================== API ENDPOINTS ====================

@app.route('/')
def home():
    return jsonify({
        "service": "HealthNest AI Chatbot - Bilingual",
        "version": "2.0",
        "languages": ["Bengali", "English"],
        "features": [
            "Automatic language detection",
            "15 health topics",
            "Personalized calculations"
        ],
        "status": "running"
    })

@app.route('/health')
def health():
    return jsonify({
        "status": "healthy",
        "models_loaded": True,
        "timestamp": datetime.now().isoformat()
    })

@app.route('/chat', methods=['POST'])
def chat():
    try:
        data = request.json
        message = data.get('message', '')
        
        if not message:
            return jsonify({"error": "No message provided"}), 400
        
        # Detect language
        lang = detect_language(message)
        
        # Find best matching response
        response = find_best_match(message, lang)
        
        return jsonify({
            "response": response,
            "detected_language": "Bengali" if lang == 'bn' else "English",
            "timestamp": datetime.now().isoformat()
        })
        
    except Exception as e:
        return jsonify({"error": str(e)}), 500

if __name__ == '__main__':
    print("ЁЯЪА Starting HealthNest Bilingual AI Chatbot...")
    print("ЁЯМР Listening on http://192.168.0.108:5000")
    print("ЁЯЧгя╕П Languages: Bengali (auto), English (auto)")
    print("ЁЯУЪ Topics: 15 health categories")
    app.run(host='0.0.0.0', port=5000, debug=True)
