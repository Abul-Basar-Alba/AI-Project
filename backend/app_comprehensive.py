"""
HealthNest AI - Comprehensive Health Chatbot Backend
Complete knowledge base covering all HealthNest app features
"""

from flask import Flask, request, jsonify
from flask_cors import CORS
import math
import re
from datetime import datetime

app = Flask(__name__)
CORS(app)

# ==================== LANGUAGE DETECTION ====================

def detect_language(text):
    """Detect if text is in Bengali or English"""
    # Bengali Unicode range: \u0980-\u09FF
    bengali_chars = re.findall(r'[\u0980-\u09FF]', text)
    
    # If more than 30% Bengali characters, consider it Bengali
    if len(bengali_chars) > len(text) * 0.3:
        return 'bn'
    return 'en'

# ==================== COMPREHENSIVE HEALTH KNOWLEDGE BASE ====================

HEALTH_KNOWLEDGE = {
    # ==================== APP INFORMATION ====================
    "app_info": {
        "name": "HealthNest",
        "purpose": "HealthNest рж╣рж▓рзЛ ржПржХржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛ ржЕрзНржпрж╛ржк ржпрж╛ ржЖржкржирж╛рж░ рж╕ржХрж▓ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзЗржмрж╛ ржПржХ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред",
        "why_use": [
            "ЁЯУК рж╕рзНржмрж╛рж╕рзНржерзНржп ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ: BMI, ржУржЬржи, ржЙржЪрзНржЪрждрж╛, ржкрж╛ржирж┐ ржкрж╛ржи, ржШрзБржо, ржкржжржХрзНрж╖рзЗржк ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзБржи",
            "ЁЯТК ржФрж╖ржз рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░: рж╕ржоржпрж╝ржорждрзЛ ржФрж╖ржз ржЦрж╛ржУржпрж╝рж╛рж░ ржЬржирзНржп рж╕рзНржорж░ржг ржХрж░рж┐ржпрж╝рзЗ ржжрзЗржпрж╝",
            "ЁЯд░ ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛ ржЯрзНрж░рзНржпрж╛ржХрж╛рж░: рж╕ржкрзНрждрж╛рж╣ ржЕржирзБржпрж╛ржпрж╝рзА рж╢рж┐рж╢рзБрж░ ржмрзГржжрзНржзрж┐ ржУ ржорж╛ржпрж╝рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп ржоржирж┐ржЯрж░ ржХрж░рзБржи",
            "ЁЯСй ржорж╣рж┐рж▓рж╛ржжрзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп: ржкрж┐рж░рж┐ржпрж╝ржб ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ, PCOS ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛",
            "ЁЯПГ ржмрзНржпрж╛ржпрж╝рж╛ржо ржУ ржлрж┐ржЯржирзЗрж╕: ржХрж╛рж╕рзНржЯржо ржУржпрж╝рж╛рж░рзНржХржЖржЙржЯ ржкрзНрж▓рзНржпрж╛ржи",
            "ЁЯеЧ ржкрзБрж╖рзНржЯрж┐ ржкрж░рж┐ржХрж▓рзНржкржирж╛: ржЦрж╛ржмрж╛рж░ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржУ рж╕рзБржкрж╛рж░рж┐рж╢",
            "ЁЯШ┤ ржШрзБржо ржЯрзНрж░рзНржпрж╛ржХрж╛рж░: ржШрзБржорзЗрж░ ржорж╛ржи ржЙржирзНржиржд ржХрж░рзБржи",
            "ЁЯй║ рж╕рзНржмрж╛рж╕рзНржерзНржп ржбрж╛ржпрж╝рзЗрж░рж┐: рж▓ржХрзНрж╖ржг ржУ рж╕рзНржмрж╛рж╕рзНржерзНржп рждржерзНржп рж░рзЗржХрж░рзНржб ржХрж░рзБржи",
            "ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж ржкрж░рж┐ржмрж╛рж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓: ржкрзБрж░рзЛ ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛",
            "ЁЯдЦ AI рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рж╣рж╛ржпрж╝ржХ: 24/7 рж╕рзНржмрж╛рж╕рзНржерзНржп ржкрж░рж╛ржорж░рзНрж╢"
        ],
        "how_to_use": [
            "1я╕ПтГг ржкрзНрж░ржержорзЗ ржЕрзНржпрж╛ржкрзЗ рж╕рж╛ржЗржи ржЖржк ржХрж░рзБржи ржПржмржВ ржЖржкржирж╛рж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ рж╕ржорзНржкрзВрж░рзНржг ржХрж░рзБржи",
            "2я╕ПтГг рж╣рзЛржо рж╕рзНржХрзНрж░рж┐ржирзЗ ржЖржкржирж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржжрзЗржЦрзБржи",
            "3я╕ПтГг ржкрзНрж░рждрж┐ржжрж┐ржи ржкрж╛ржирж┐ ржкрж╛ржи, ржШрзБржо, ржЦрж╛ржмрж╛рж░ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзБржи",
            "4я╕ПтГг ржФрж╖ржз рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░ рж╕рзЗржЯ ржХрж░рзБржи",
            "5я╕ПтГг ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржи ржПржмржВ ржкржжржХрзНрж╖рзЗржк ржЧржгржирж╛ ржХрж░рзБржи",
            "6я╕ПтГг рж╕рзНржмрж╛рж╕рзНржерзНржп ржбрж╛ржпрж╝рзЗрж░рж┐рждрзЗ рж▓ржХрзНрж╖ржг рж▓рж┐ржЦрзБржи",
            "7я╕ПтГг AI ржЪрзНржпрж╛ржЯржмржЯрзЗ ржпрзЗржХрзЛржирзЛ ржкрзНрж░рж╢рзНржи ржХрж░рзБржи"
        ],
        "user_benefits": [
            "тЬЕ рж╕ржм рж╕рзНржмрж╛рж╕рзНржерзНржп рждржерзНржп ржПржХ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝",
            "тЬЕ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░ ржУ рж╕рждрж░рзНржХрждрж╛",
            "тЬЕ ржмрзНржпржХрзНрждрж┐ржЧржд рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рзБржкрж╛рж░рж┐рж╢",
            "тЬЕ ржкрж░рж┐ржмрж╛рж░рзЗрж░ ржЬржирзНржп ржПржХрж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░",
            "тЬЕ ржбрж╛ржЯрж╛ ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржУ ржЧрзЛржкржирзАржпрж╝рждрж╛",
            "тЬЕ ржЕржлрж▓рж╛ржЗржирзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝"
        ]
    },

    # ==================== BMI ====================
    "bmi": {
        "what_is": "BMI (Body Mass Index) рж╣рж▓рзЛ рж╢рж░рзАрж░рзЗрж░ ржУржЬржи ржУ ржЙржЪрзНржЪрждрж╛рж░ ржЕржирзБржкрж╛ржд ржпрж╛ ржжрж┐ржпрж╝рзЗ ржЖржкржирж╛рж░ ржУржЬржи рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржХрж┐ржирж╛ рждрж╛ ржирж┐рж░рзНржгржпрж╝ ржХрж░рж╛ рж╣ржпрж╝ред",
        "formula": "BMI = ржУржЬржи (ржХрзЗржЬрж┐) ├╖ (ржЙржЪрзНржЪрждрж╛ (ржорж┐ржЯрж╛рж░))┬▓",
        "categories": {
            "underweight": "< 18.5 - ржХржо ржУржЬржи (рж╕рзНржмрж╛рж╕рзНржерзНржп ржЭрзБржБржХрж┐: ржкрзБрж╖рзНржЯрж┐рж░ ржЕржнрж╛ржм, ржжрзБрж░рзНржмрж▓ рж░рзЛржЧ ржкрзНрж░рждрж┐рж░рзЛржз)",
            "normal": "18.5 - 24.9 - рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ (ржЖржжрж░рзНрж╢ ржУржЬржи)",
            "overweight": "25 - 29.9 - ржЕрждрж┐рж░рж┐ржХрзНржд ржУржЬржи (ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕, рж╣рзГржжрж░рзЛржЧрзЗрж░ ржЭрзБржБржХрж┐)",
            "obese": ">= 30 - рж╕рзНржерзВрж▓рждрж╛ (ржЙржЪрзНржЪ рж╕рзНржмрж╛рж╕рзНржерзНржп ржЭрзБржБржХрж┐)"
        },
        "how_to_calculate": "HealthNest ржЕрзНржпрж╛ржкрзЗ Calculator рж╕рзЗржХрж╢ржирзЗ ржЧрж┐ржпрж╝рзЗ ржЖржкржирж╛рж░ ржУржЬржи ржУ ржЙржЪрзНржЪрждрж╛ ржжрж┐ржи, рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ BMI рж╣рж┐рж╕рж╛ржм рж╣ржмрзЗред",
        "tips": [
            "ржирж┐ржпрж╝ржорж┐ржд BMI ржЪрзЗржХ ржХрж░рзБржи (ржорж╛рж╕рзЗ ржЕржирзНрждржд ржПржХржмрж╛рж░)",
            "рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи",
            "ржкрзНрж░рждрж┐ржжрж┐ржи 30 ржорж┐ржирж┐ржЯ ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржи",
            "ржкрж░рзНржпрж╛ржкрзНржд ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи"
        ]
    },

    # ==================== WEIGHT MANAGEMENT ====================
    "weight_loss": {
        "general": "ржУржЬржи ржХржорж╛ржирзЛрж░ ржЬржирзНржп ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржШрж╛ржЯрждрж┐ ржкрзНрж░ржпрж╝рзЛржЬржиред ржкрзНрж░рждрж┐ржжрж┐ржи ржпрждржЯрзБржХрзБ ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржЦрж░ржЪ ржХрж░рзЗржи рждрж╛рж░ ржЪрзЗржпрж╝рзЗ ржХржо ржЦрж╛ржиред",
        "safe_rate": "рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ржнрж╛ржмрзЗ рж╕ржкрзНрждрж╛рж╣рзЗ 0.5-1 ржХрзЗржЬрж┐ ржУржЬржи ржХржорж╛ржирзЛ ржпрж╛ржпрж╝ред",
        "tips": [
            "ЁЯН╜я╕П ржЫрзЛржЯ ржкрзНрж▓рзЗржЯрзЗ ржЦрж╛ржи, ржкрж░рж┐ржорж╛ржг ржХржоржмрзЗ",
            "ЁЯеЧ рж╕ржмржЬрж┐ ржмрзЗрж╢рж┐ ржЦрж╛ржи (ржкрзНрж▓рзЗржЯрзЗрж░ ржЕрж░рзНржзрзЗржХ)",
            "ЁЯПГ ржкрзНрж░рждрж┐ржжрж┐ржи 30-60 ржорж┐ржирж┐ржЯ ржХрж╛рж░рзНржбрж┐ржУ ржХрж░рзБржи",
            "ЁЯТк рж╕ржкрзНрждрж╛рж╣рзЗ 2-3 ржжрж┐ржи ржУржпрж╝рзЗржЯ ржЯрзНрж░рзЗржирж┐ржВ ржХрж░рзБржи",
            "ЁЯТз ржЦрж╛ржУржпрж╝рж╛рж░ ржЖржЧрзЗ 1-2 ржЧрзНрж▓рж╛рж╕ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи",
            "ЁЯШ┤ ржкрзНрж░рждрж┐ржжрж┐ржи 7-8 ржШржгрзНржЯрж╛ ржШрзБржорж╛ржи",
            "ЁЯУ▒ HealthNest ржП ржЦрж╛ржмрж╛рж░ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзБржи"
        ],
        "diet_plan": {
            "breakfast": "ржбрж┐ржо, ржУржЯржорж┐рж▓, ржлрж▓, ржмрж╛ржжрж╛ржо",
            "lunch": "ржнрж╛ржд/рж░рзБржЯрж┐ (ржХржо), ржорж╛ржЫ/ржорзБрж░ржЧрж┐, рж╕ржмржЬрж┐",
            "snack": "ржлрж▓, ржжржЗ, ржмрж╛ржжрж╛ржо (рж╕рзАржорж┐ржд)",
            "dinner": "рж╣рж╛рж▓ржХрж╛ ржЦрж╛ржмрж╛рж░, рж╕ржмржЬрж┐ рж╕рзНржпрзБржк"
        },
        "exercises": [
            "ржжрзМржбрж╝рж╛ржирзЛ/рж╣рж╛ржБржЯрж╛: 300-400 ржХрзНржпрж╛рж▓рзЛрж░рж┐/ржШржгрзНржЯрж╛",
            "рж╕рж╛ржЗржХрзЗрж▓ ржЪрж╛рж▓рж╛ржирзЛ: 400-600 ржХрзНржпрж╛рж▓рзЛрж░рж┐/ржШржгрзНржЯрж╛",
            "рж╕рж╛ржБрждрж╛рж░: 400-700 ржХрзНржпрж╛рж▓рзЛрж░рж┐/ржШржгрзНржЯрж╛",
            "ржЬрж╛ржорзНржкрж┐ржВ рж░рзЛржк: 600-800 ржХрзНржпрж╛рж▓рзЛрж░рж┐/ржШржгрзНржЯрж╛"
        ]
    },

    # ==================== NUTRITION ====================
    "nutrition": {
        "balanced_diet": "рж╕рзБрж╖ржо ржЦрж╛ржжрзНржпрзЗ ржХрж╛рж░рзНржмрзЛрж╣рж╛ржЗржбрзНрж░рзЗржЯ, ржкрзНрж░рзЛржЯрж┐ржи, ржЪрж░рзНржмрж┐, ржнрж┐ржЯрж╛ржорж┐ржи ржУ ржЦржирж┐ржЬ ржкржжрж╛рж░рзНрже ржерж╛ржХрж╛ ржЙржЪрж┐рждред",
        "macros": {
            "carbs": "45-65% - рж╢ржХрзНрждрж┐рж░ ржкрзНрж░ржзрж╛ржи ржЙрзОрж╕ (ржнрж╛ржд, рж░рзБржЯрж┐, ржлрж▓)",
            "protein": "10-35% - ржкрзЗрж╢рж┐ рждрзИрж░рж┐ (ржорж╛ржЫ, ржорж╛ржВрж╕, ржбрж╛рж▓, ржбрж┐ржо)",
            "fats": "20-35% - рж╣рж░ржорзЛржи ржЙрзОржкрж╛ржжржи (рждрзЗрж▓, ржмрж╛ржжрж╛ржо, ржорж╛ржЫ)"
        },
        "daily_needs": "ржкрзНрж░рж╛ржкрзНрждржмржпрж╝рж╕рзНржХржжрзЗрж░ ржкрзНрж░рждрж┐ржжрж┐ржи ржкрзНрж░ржпрж╝рзЛржЬржи: ржкрзНрж░рзЛржЯрж┐ржи 0.8g/kg, ржлрж╛ржЗржмрж╛рж░ 25-30g, ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо 1000mg",
        "meal_timing": [
            "рж╕ржХрж╛рж▓ 7-9: ржнрж╛рж░рзА ржирж╛рж╕рзНрждрж╛",
            "ржжрзБржкрзБрж░ 12-2: ржкрзНрж░ржзрж╛ржи ржЦрж╛ржмрж╛рж░",
            "ржмрж┐ржХрж╛рж▓ 4-5: рж╣рж╛рж▓ржХрж╛ рж╕рзНржирзНржпрж╛ржХрзНрж╕",
            "рж░рж╛ржд 7-9: рж╣рж╛рж▓ржХрж╛ ржбрж┐ржирж╛рж░"
        ],
        "food_tracking": "HealthNest ржЕрзНржпрж╛ржкрзЗ Nutrition рж╕рзЗржХрж╢ржирзЗ ржЦрж╛ржмрж╛рж░ рж▓ржЧ ржХрж░рзБржи, ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржУ ржкрзБрж╖рзНржЯрж┐ ржЯрзНрж░рзНржпрж╛ржХ рж╣ржмрзЗред"
    },

    # ==================== WATER INTAKE ====================
    "water": {
        "daily_need": "ржкрзНрж░рж╛ржкрзНрждржмржпрж╝рж╕рзНржХржжрзЗрж░ ржкрзНрж░рждрж┐ржжрж┐ржи 2.5-3.5 рж▓рж┐ржЯрж╛рж░ ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рж╛ ржЙржЪрж┐рждред",
        "formula": "рж╢рж░рзАрж░рзЗрж░ ржУржЬржи (ржХрзЗржЬрж┐) ├Ч 0.033 = ржжрзИржирж┐ржХ ржкрж╛ржирж┐ (рж▓рж┐ржЯрж╛рж░)",
        "benefits": [
            "ЁЯТз рж╢рж░рзАрж░ рж╣рж╛ржЗржбрзНрж░рзЗржЯрзЗржб рж░рж╛ржЦрзЗ",
            "ЁЯза ржорж╕рзНрждрж┐рж╖рзНржХ ржХрж╛рж░рзНржпржХрзНрж╖ржорждрж╛ ржмрж╛ржбрж╝рж╛ржпрж╝",
            "ЁЯТк ржкрзЗрж╢рж┐ ржжржХрзНрж╖рждрж╛ ржмрзГржжрзНржзрж┐ ржХрж░рзЗ",
            "ЁЯМбя╕П рж╢рж░рзАрж░рзЗрж░ рждрж╛ржкржорж╛рждрзНрж░рж╛ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзЗ",
            "ЁЯФе ржорзЗржЯрж╛ржмрж▓рж┐ржЬржо ржмрж╛ржбрж╝рж╛ржпрж╝",
            "тЬи рждрзНржмржХ ржЙржЬрзНржЬрзНржмрж▓ рж░рж╛ржЦрзЗ"
        ],
        "when_to_drink": [
            "рж╕ржХрж╛рж▓рзЗ ржШрзБржо ржерзЗржХрзЗ ржЙржарзЗ 1-2 ржЧрзНрж▓рж╛рж╕",
            "ржЦрж╛ржмрж╛рж░ ржЖржЧрзЗ 30 ржорж┐ржирж┐ржЯ",
            "ржмрзНржпрж╛ржпрж╝рж╛ржорзЗрж░ ржЖржЧрзЗ ржУ ржкрж░рзЗ",
            "ржШрзБржорж╛ржирзЛрж░ 1 ржШржгрзНржЯрж╛ ржЖржЧрзЗ"
        ],
        "app_feature": "HealthNest ржП Water Reminder рж╕рзЗржЯ ржХрж░рзБржи, ржирж┐ржпрж╝ржорж┐ржд ржкрж╛ржирж┐ ржкрж╛ржирзЗрж░ ржЬржирзНржп ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржкрж╛ржмрзЗржиред"
    },

    # ==================== SLEEP ====================
    "sleep": {
        "daily_need": {
            "adults": "7-9 ржШржгрзНржЯрж╛",
            "teens": "8-10 ржШржгрзНржЯрж╛",
            "children": "9-12 ржШржгрзНржЯрж╛",
            "elderly": "7-8 ржШржгрзНржЯрж╛"
        },
        "benefits": [
            "ЁЯза ржорж╕рзНрждрж┐рж╖рзНржХ рж░рж┐ржЪрж╛рж░рзНржЬ рж╣ржпрж╝",
            "ЁЯТк ржкрзЗрж╢рж┐ ржорзЗрж░рж╛ржоржд рж╣ржпрж╝",
            "ЁЯЫбя╕П рж░рзЛржЧ ржкрзНрж░рждрж┐рж░рзЛржз ржХрзНрж╖ржорждрж╛ ржмрж╛ржбрж╝рзЗ",
            "тЭдя╕П рж╣рзГржжрж░рзЛржЧрзЗрж░ ржЭрзБржБржХрж┐ ржХржорзЗ",
            "тЪЦя╕П ржУржЬржи ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ"
        ],
        "quality_tips": [
            "ЁЯМЩ ржПржХржЗ рж╕ржоржпрж╝рзЗ ржШрзБржорж╛ржи ржУ ржЙржарзБржи",
            "ЁЯУ▒ ржШрзБржорзЗрж░ 1 ржШржгрзНржЯрж╛ ржЖржЧрзЗ ржлрзЛржи ржмржирзНржз ржХрж░рзБржи",
            "ЁЯМбя╕П ржШрж░рзЗрж░ рждрж╛ржкржорж╛рждрзНрж░рж╛ 18-22┬░C рж░рж╛ржЦрзБржи",
            "тШХ ржмрж┐ржХрж╛рж▓рзЗрж░ ржкрж░ ржХржлрж┐ ржкрж╛ржи ржХрж░ржмрзЗржи ржирж╛",
            "ЁЯзШ ржШрзБржорзЗрж░ ржЖржЧрзЗ ржорзЗржбрж┐ржЯрзЗрж╢ржи ржХрж░рзБржи"
        ],
        "tracker": "HealthNest ржП Sleep Tracker ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржШрзБржорзЗрж░ ржорж╛ржи ржоржирж┐ржЯрж░ ржХрж░рзБржиред"
    },

    # ==================== FITNESS & EXERCISE ====================
    "fitness": {
        "types": {
            "cardio": "ржжрзМржбрж╝, рж╕рж╛ржЗржХрзЗрж▓, рж╕рж╛ржБрждрж╛рж░ - рж╣рзГрзОржкрж┐ржгрзНржб ржУ ржлрзБрж╕ржлрзБрж╕ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржХрж░рзЗ",
            "strength": "ржУржпрж╝рзЗржЯ рж▓рж┐ржлржЯрж┐ржВ, ржкрзБрж╢ржЖржк - ржкрзЗрж╢рж┐ рждрзИрж░рж┐ ржХрж░рзЗ",
            "flexibility": "ржпрзЛржЧржмрзНржпрж╛ржпрж╝рж╛ржо, рж╕рзНржЯрзНрж░рзЗржЪрж┐ржВ - ржиржоржирзАржпрж╝рждрж╛ ржмрж╛ржбрж╝рж╛ржпрж╝",
            "hiit": "High Intensity Interval Training - ржжрзНрж░рзБржд ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржкрзЛржбрж╝рж╛ржпрж╝"
        },
        "beginner_plan": {
            "week_1_2": "рж╣рж╛ржБржЯрж╛ 20 ржорж┐ржирж┐ржЯ, рж╣рж╛рж▓ржХрж╛ рж╕рзНржЯрзНрж░рзЗржЪрж┐ржВ",
            "week_3_4": "ржЬржЧрж┐ржВ 15 ржорж┐ржирж┐ржЯ + ржмржбрж┐ржУржпрж╝рзЗржЯ ржмрзНржпрж╛ржпрж╝рж╛ржо",
            "week_5_6": "ржжрзМржбрж╝ 20 ржорж┐ржирж┐ржЯ + ржУржпрж╝рзЗржЯ ржЯрзНрж░рзЗржирж┐ржВ рж╢рзБрж░рзБ"
        },
        "tips": [
            "рж╕ржкрзНрждрж╛рж╣рзЗ ржЕржирзНрждржд 150 ржорж┐ржирж┐ржЯ ржорж╛ржЭрж╛рж░рж┐ ржмрзНржпрж╛ржпрж╝рж╛ржо",
            "ржмрзНржпрж╛ржпрж╝рж╛ржорзЗрж░ ржЖржЧрзЗ ржУржпрж╝рж╛рж░рзНржоржЖржк ржХрж░рзБржи",
            "ржмрзНржпрж╛ржпрж╝рж╛ржорзЗрж░ ржкрж░рзЗ рж╕рзНржЯрзНрж░рзЗржЪрж┐ржВ ржХрж░рзБржи",
            "ржкрж░рзНржпрж╛ржкрзНржд ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░рзБржи",
            "ржмрж┐рж╢рзНрж░рж╛ржо ржжрж┐ржмрж╕ рж░рж╛ржЦрзБржи"
        ],
        "app_features": "HealthNest ржП Custom Workout Plans, Exercise Library, Step Counter ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред"
    },

    # ==================== PREGNANCY ====================
    "pregnancy": {
        "overview": "ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛ 40 рж╕ржкрзНрждрж╛рж╣ рж╕рзНржерж╛ржпрж╝рзА рж╣ржпрж╝, 3ржЯрж┐ ржЯрзНрж░рж╛ржЗржорзЗрж╕рзНржЯрж╛рж░рзЗ ржнрж╛ржЧред",
        "trimesters": {
            "first": "1-12 рж╕ржкрзНрждрж╛рж╣: ржмржорж┐ ржнрж╛ржм, ржХрзНрж▓рж╛ржирзНрждрж┐, рж╣рж░ржорзЛржи ржкрж░рж┐ржмрж░рзНрждржи",
            "second": "13-27 рж╕ржкрзНрждрж╛рж╣: рж╢рж┐рж╢рзБ ржиржбрж╝рж╛ржЪржбрж╝рж╛ ржЕржирзБржнржм, ржкрзЗржЯ ржмржбрж╝ рж╣ржУржпрж╝рж╛",
            "third": "28-40 рж╕ржкрзНрждрж╛рж╣: ржУржЬржи ржмрзГржжрзНржзрж┐, ржкрзНрж░рж╕ржмрзЗрж░ ржкрзНрж░рж╕рзНрждрзБрждрж┐"
        },
        "nutrition": [
            "ЁЯеЪ ржкрзНрж░рждрж┐ржжрж┐ржи 300-500 ржЕрждрж┐рж░рж┐ржХрзНржд ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржЦрж╛ржи",
            "ЁЯеЫ ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо ржмрзЗрж╢рж┐ ржЦрж╛ржи (ржжрзБржз, ржжржЗ)",
            "ЁЯеЧ ржлрзЛрж▓рж┐ржХ ржПрж╕рж┐ржб (рж╕ржмрзБржЬ рж╢рж╛ржХ)",
            "ЁЯРЯ ржУржорзЗржЧрж╛-3 (ржорж╛ржЫ)",
            "ЁЯНК ржЖржпрж╝рж░ржи ржУ ржнрж┐ржЯрж╛ржорж┐ржи рж╕рж┐",
            "ЁЯТК ржбрж╛ржХрзНрждрж╛рж░рзЗрж░ ржкрж░рж╛ржорж░рзНрж╢ ржЕржирзБржпрж╛ржпрж╝рзА рж╕рж╛ржкрзНрж▓рж┐ржорзЗржирзНржЯ"
        ],
        "exercise": [
            "рж╣рж╛ржБржЯрж╛: ржирж┐рж░рж╛ржкржж ржУ ржХрж╛рж░рзНржпржХрж░",
            "ржпрзЛржЧржмрзНржпрж╛ржпрж╝рж╛ржо: ржиржоржирзАржпрж╝рждрж╛ ржмрж╛ржбрж╝рж╛ржпрж╝",
            "рж╕рж╛ржБрждрж╛рж░: рж╢рж░рзАрж░ рж╣рж╛рж▓ржХрж╛ рж▓рж╛ржЧрзЗ",
            "ржкрзЗрж▓ржнрж┐ржХ ржлрзНрж▓рзЛрж░ ржмрзНржпрж╛ржпрж╝рж╛ржо: ржкрзНрж░рж╕ржм рж╕рж╣ржЬ ржХрж░рзЗ"
        ],
        "symptoms": [
            "ржмржорж┐ ржнрж╛ржм (ржорж░рзНржирж┐ржВ рж╕рж┐ржХржирзЗрж╕)",
            "ржХрзНрж▓рж╛ржирзНрждрж┐ ржУ ржШрзБржо ржмрзЗрж╢рж┐",
            "ржШржи ржШржи ржкрзНрж░рж╕рзНрж░рж╛ржм",
            "ржорзБржб рж╕рзБржЗржВ",
            "ржкрж┐ржа ржмрзНржпржерж╛"
        ],
        "app_features": "HealthNest ржП Pregnancy Tracker: рж╕ржкрзНрждрж╛рж╣ ржЕржирзБржпрж╛ржпрж╝рзА рж╢рж┐рж╢рзБрж░ ржмрзГржжрзНржзрж┐, Kick Counter, Contraction Timer, Doctor Visits рж▓ржЧ ржХрж░рзБржиред"
    },

    # ==================== WOMEN'S HEALTH ====================
    "womens_health": {
        "period": {
            "cycle": "рж╕рж╛ржзрж╛рж░ржгржд 28 ржжрж┐ржи (21-35 ржжрж┐ржи рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ)",
            "duration": "3-7 ржжрж┐ржи рж╕рзНржерж╛ржпрж╝рзА рж╣ржпрж╝",
            "pain_relief": [
                "ржЧрж░ржо ржкрж╛ржирж┐рж░ рж╕рзЗржБржХ",
                "рж╣рж╛рж▓ржХрж╛ ржмрзНржпрж╛ржпрж╝рж╛ржо",
                "ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо ржУ ржорзНржпрж╛ржЧржирзЗрж╕рж┐ржпрж╝рж╛ржо рж╕ржорзГржжрзНржз ржЦрж╛ржмрж╛рж░",
                "ржкрж░рзНржпрж╛ржкрзНржд ржмрж┐рж╢рзНрж░рж╛ржо"
            ],
            "tracker": "HealthNest ржП Period Tracker ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржкрж┐рж░рж┐ржпрж╝ржб рж╕рж╛ржЗржХрзЗрж▓ ржоржирж┐ржЯрж░ ржХрж░рзБржиред"
        },
        "pcos": {
            "symptoms": "ржЕржирж┐ржпрж╝ржорж┐ржд ржкрж┐рж░рж┐ржпрж╝ржб, ржУржЬржи ржмрзГржжрзНржзрж┐, ржмрзНрж░ржг, ржЕрждрж┐рж░рж┐ржХрзНржд ржЪрзБрж▓",
            "management": [
                "рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржЦрж╛ржмрж╛рж░ (ржХржо ржЪрж┐ржирж┐)",
                "ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржпрж╝рж╛ржо",
                "ржУржЬржи ржХржорж╛ржирзЛ (5-10%)",
                "ржЪрж╛ржк ржХржорж╛ржирзЛ"
            ]
        },
        "menopause": {
            "age": "45-55 ржмржЫрж░",
            "symptoms": "рж╣ржЯ ржлрзНрж▓рзНржпрж╛рж╢, ржорзБржб рж╕рзБржЗржВ, ржШрзБржорзЗрж░ рж╕ржорж╕рзНржпрж╛",
            "tips": [
                "ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо ржУ ржнрж┐ржЯрж╛ржорж┐ржи ржбрж┐ ржирж┐ржи",
                "ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржи",
                "ржорж╛ржирж╕рж┐ржХ ржЪрж╛ржк ржХржорж╛ржи"
            ]
        }
    },

    # ==================== MEDICINE REMINDER ====================
    "medicine": {
        "importance": "ржирж┐ржпрж╝ржорж┐ржд ржФрж╖ржз ржЦрж╛ржУржпрж╝рж╛ ржЪрж┐ржХрж┐рзОрж╕рж╛рж░ рж╕ржлрж▓рждрж╛рж░ ржЬржирзНржп ржЕржкрж░рж┐рж╣рж╛рж░рзНржпред",
        "tips": [
            "тП░ ржПржХржЗ рж╕ржоржпрж╝рзЗ ржФрж╖ржз ржЦрж╛ржи",
            "ЁЯУ▒ рж░рж┐ржорж╛ржЗржирзНржбрж╛рж░ рж╕рзЗржЯ ржХрж░рзБржи",
            "ЁЯТК ржбрзЛржЬ ржорж┐рж╕ ржХрж░рж▓рзЗ ржпржд рждрж╛ржбрж╝рж╛рждрж╛ржбрж╝рж┐ рж╕ржорзНржнржм ржЦрж╛ржи",
            "ЁЯЪл ржбржмрж▓ ржбрзЛржЬ ржирзЗржмрзЗржи ржирж╛",
            "ЁЯУЭ ржФрж╖ржзрзЗрж░ рждрж╛рж▓рж┐ржХрж╛ рж░рж╛ржЦрзБржи"
        ],
        "app_feature": "HealthNest ржП Medicine Reminder рж╕рзЗржЯ ржХрж░рзБржи: ржФрж╖ржзрзЗрж░ ржирж╛ржо, рж╕ржоржпрж╝, ржбрзЛржЬ ржпрзЛржЧ ржХрж░рзБржиред ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржкрж╛ржмрзЗржиред"
    },

    # ==================== BLOOD PRESSURE ====================
    "blood_pressure": {
        "normal": "120/80 mmHg",
        "categories": {
            "low": "< 90/60 - ржирж┐ржорзНржи рж░ржХрзНрждржЪрж╛ржк",
            "normal": "90/60 - 120/80 - рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ",
            "elevated": "120/80 - 130/80 - ржЙржЪрзНржЪрждрж░",
            "high": "> 130/80 - ржЙржЪрзНржЪ рж░ржХрзНрждржЪрж╛ржк"
        },
        "management": [
            "ЁЯзВ рж▓ржмржг ржХржо ржЦрж╛ржи (< 5g/ржжрж┐ржи)",
            "ЁЯПГ ржирж┐ржпрж╝ржорж┐ржд ржмрзНржпрж╛ржпрж╝рж╛ржо ржХрж░рзБржи",
            "ЁЯН╖ ржоржжрзНржпржкрж╛ржи ржХржорж╛ржи",
            "ЁЯЪн ржзрзВржоржкрж╛ржи ржЫрж╛ржбрж╝рзБржи",
            "ЁЯШМ ржорж╛ржирж╕рж┐ржХ ржЪрж╛ржк ржХржорж╛ржи",
            "ЁЯУК ржирж┐ржпрж╝ржорж┐ржд ржЪрзЗржХ ржХрж░рзБржи"
        ]
    },

    # ==================== BLOOD SUGAR ====================
    "blood_sugar": {
        "normal": {
            "fasting": "70-100 mg/dL",
            "after_meal": "< 140 mg/dL",
            "hba1c": "< 5.7%"
        },
        "diabetes_prevention": [
            "ЁЯеЧ рж╕рзБрж╖ржо ржЦрж╛ржмрж╛рж░ ржЦрж╛ржи",
            "ЁЯЪл ржЪрж┐ржирж┐ ржУ ржорж┐рж╖рзНржЯрж┐ ржХржорж╛ржи",
            "ЁЯПГ ржкрзНрж░рждрж┐ржжрж┐ржи 30 ржорж┐ржирж┐ржЯ ржмрзНржпрж╛ржпрж╝рж╛ржо",
            "тЪЦя╕П рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░ ржУржЬржи ржмржЬрж╛ржпрж╝ рж░рж╛ржЦрзБржи",
            "ЁЯУК ржирж┐ржпрж╝ржорж┐ржд ржЪрзЗржХ ржХрж░рзБржи"
        ],
        "signs": "ржЕрждрж┐рж░рж┐ржХрзНржд ржкрж┐ржкрж╛рж╕рж╛, ржШржи ржШржи ржкрзНрж░рж╕рзНрж░рж╛ржм, ржХрзНрж▓рж╛ржирзНрждрж┐, ржЭрж╛ржкрж╕рж╛ ржжрзГрж╖рзНржЯрж┐"
    },

    # ==================== MENTAL HEALTH ====================
    "mental_health": {
        "importance": "ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╢рж╛рж░рзАрж░рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржпрзЗрж░ ржорждрзЛржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред",
        "stress_management": [
            "ЁЯзШ ржорзЗржбрж┐ржЯрзЗрж╢ржи ржУ ржпрзЛржЧржмрзНржпрж╛ржпрж╝рж╛ржо",
            "ЁЯШ┤ ржкрж░рзНржпрж╛ржкрзНржд ржШрзБржо",
            "ЁЯЪ╢ ржирж┐ржпрж╝ржорж┐ржд рж╣рж╛ржБржЯрж╛",
            "ЁЯСе ржмржирзНржзрзБ-ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржоржпрж╝ ржХрж╛ржЯрж╛ржи",
            "ЁЯУЪ рж╢ржЦрзЗрж░ ржХрж╛ржЬ ржХрж░рзБржи",
            "ЁЯО╡ рж╕ржЩрзНржЧрзАржд рж╢рзБржирзБржи"
        ],
        "anxiety_tips": [
            "ржЧржнрзАрж░ рж╢рзНржмрж╛рж╕ ржирж┐ржи (4-7-8 ржЯрзЗржХржирж┐ржХ)",
            "рж╕ржорж╕рзНржпрж╛ рж▓рж┐ржЦрзЗ ржлрзЗрж▓рзБржи",
            "ржкржЬрж┐ржЯрж┐ржн ржЪрж┐ржирзНрждрж╛ ржХрж░рзБржи",
            "ржкрзЗрж╢рж╛ржжрж╛рж░ рж╕рж╛рж╣рж╛ржпрзНржп ржирж┐ржи (ржкрзНрж░ржпрж╝рзЛржЬржирзЗ)"
        ],
        "depression_signs": "ржжрзАрж░рзНржШрж╕рзНржерж╛ржпрж╝рзА ржжрзБржГржЦ, ржЖржЧрзНрж░рж╣ рж╣рж╛рж░рж╛ржирзЛ, ржШрзБржорзЗрж░ рж╕ржорж╕рзНржпрж╛, ржХрзНрж▓рж╛ржирзНрждрж┐"
    },

    # ==================== HEALTH DIARY ====================
    "health_diary": {
        "purpose": "ржжрзИржирж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп рж▓ржХрзНрж╖ржг ржУ ржШржЯржирж╛ рж░рзЗржХрж░рзНржб ржХрж░рзБржиред",
        "what_to_log": [
            "ЁЯУЭ рж▓ржХрзНрж╖ржг (ржмрзНржпржерж╛, ржЬрзНржмрж░, ржЕрж╕рзНржмрж╕рзНрждрж┐)",
            "ЁЯТК ржФрж╖ржз рж╕рзЗржмржи",
            "ЁЯН╜я╕П ржЦрж╛ржмрж╛рж░ ржУ ржкрж╛ржирж┐",
            "ЁЯШ┤ ржШрзБржорзЗрж░ рж╕ржоржпрж╝ ржУ ржорж╛ржи",
            "ЁЯПГ ржмрзНржпрж╛ржпрж╝рж╛ржо ржУ ржХрж╛рж░рзНржпржХрж▓рж╛ржк",
            "ЁЯМбя╕П рждрж╛ржкржорж╛рждрзНрж░рж╛, рж░ржХрзНрждржЪрж╛ржк",
            "ЁЯШК ржорзБржб ржУ ржорж╛ржирж╕рж┐ржХ ржЕржмрж╕рзНржерж╛"
        ],
        "benefits": [
            "рж░рзЛржЧ ржкрзНржпрж╛ржЯрж╛рж░рзНржи рж╢ржирж╛ржХрзНржд ржХрж░рж╛",
            "ржбрж╛ржХрзНрждрж╛рж░ржХрзЗ рж╕ржарж┐ржХ рждржерзНржп ржжрзЗржУржпрж╝рж╛",
            "ржЪрж┐ржХрж┐рзОрж╕рж╛рж░ ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ ржорзВрж▓рзНржпрж╛ржпрж╝ржи",
            "рж╕рзНржмрж╛рж╕рзНржерзНржп рж▓ржХрзНрж╖рзНржп ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ"
        ],
        "app_feature": "HealthNest ржП Health Diary рж╕рзЗржХрж╢ржирзЗ ржкрзНрж░рждрж┐ржжрж┐ржирзЗрж░ рждржерзНржп рж▓ржЧ ржХрж░рзБржиред"
    },

    # ==================== FAMILY HEALTH ====================
    "family_health": {
        "features": "HealthNest ржП ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕ржХрж▓рзЗрж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржиред",
        "benefits": [
            "ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж ржкрзБрж░рзЛ ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп ржПржХ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝",
            "ЁЯС╢ рж╢рж┐рж╢рзБржжрзЗрж░ ржЯрж┐ржХрж╛ ржУ ржмрзГржжрзНржзрж┐ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзБржи",
            "ЁЯС┤ ржмржпрж╝рж╕рзНржХржжрзЗрж░ ржФрж╖ржз ржоржирж┐ржЯрж░ ржХрж░рзБржи",
            "ЁЯУК рж╕ржмрж╛рж░ рж╕рзНржмрж╛рж╕рзНржерзНржп рж░рж┐ржкрзЛрж░рзНржЯ ржжрзЗржЦрзБржи"
        ]
    },

    # ==================== DRUG INTERACTION ====================
    "drug_interaction": {
        "what_is": "ржПржХрж╛ржзрж┐ржХ ржФрж╖ржз ржПржХрж╕рж╛ржерзЗ ржЦрзЗрж▓рзЗ рждрж╛рж░рж╛ ржПржХрзЗ ржЕржкрж░рзЗрж░ ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ ржкрзНрж░ржнрж╛ржмрж┐ржд ржХрж░рждрзЗ ржкрж╛рж░рзЗред",
        "precautions": [
            "ржбрж╛ржХрзНрждрж╛рж░ржХрзЗ рж╕ржм ржФрж╖ржзрзЗрж░ рждрж╛рж▓рж┐ржХрж╛ ржжрж┐ржи",
            "ржирждрзБржи ржФрж╖ржз рж╢рзБрж░рзБрж░ ржЖржЧрзЗ ржЪрзЗржХ ржХрж░рзБржи",
            "ржЦрж╛ржмрж╛рж░ ржУ ржкрж╛ржирзАржпрж╝рзЗрж░ рж╕рж╛ржерзЗ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржи ржжрзЗржЦрзБржи",
            "HealthNest ржП Drug Interaction Checker ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи"
        ]
    }
}

# ==================== CALCULATION FUNCTIONS ====================

def calculate_bmi(weight, height_cm):
    """Calculate BMI"""
    height_m = height_cm / 100
    bmi = weight / (height_m ** 2)
    
    if bmi < 18.5:
        category = "underweight"
    elif bmi < 25:
        category = "normal"
    elif bmi < 30:
        category = "overweight"
    else:
        category = "obese"
    
    return round(bmi, 1), category

def calculate_bmr(age, gender, weight, height_cm):
    """Calculate Basal Metabolic Rate"""
    if gender.lower() in ['male', 'ржкрзБрж░рзБрж╖']:
        bmr = 10 * weight + 6.25 * height_cm - 5 * age + 5
    else:
        bmr = 10 * weight + 6.25 * height_cm - 5 * age - 161
    return round(bmr)

def calculate_tdee(bmr, activity_level):
    """Calculate Total Daily Energy Expenditure"""
    multipliers = {
        'sedentary': 1.2,
        'light': 1.375,
        'moderate': 1.55,
        'active': 1.725,
        'very_active': 1.9
    }
    multiplier = multipliers.get(activity_level.lower(), 1.55)
    return round(bmr * multiplier)

def calculate_water_intake(weight):
    """Calculate daily water intake"""
    return round(weight * 0.033, 1)

def calculate_step_goal(age, fitness_level='moderate'):
    """Calculate daily step goal"""
    base_steps = {
        'low': 5000,
        'moderate': 8000,
        'active': 10000,
        'very_active': 12000
    }
    return base_steps.get(fitness_level, 8000)

# ==================== AI RESPONSE GENERATION ====================

def get_comprehensive_response(message, profile=None):
    """Generate comprehensive AI response based on message and user profile"""
    
    message_lower = message.lower()
    
    # Initialize profile data
    age = profile.get('age', 25) if profile else 25
    gender = profile.get('gender', 'unknown') if profile else 'unknown'
    weight = profile.get('weight', 70) if profile else 70
    height = profile.get('height', 170) if profile else 170
    activity = profile.get('activity', 'moderate') if profile else 'moderate'
    
    # Calculate metrics
    bmi, bmi_cat = calculate_bmi(weight, height)
    bmr = calculate_bmr(age, gender, weight, height)
    tdee = calculate_tdee(bmr, activity)
    water = calculate_water_intake(weight)
    steps = calculate_step_goal(age, activity)
    
    # ==================== APP INFORMATION QUERIES ====================
    
    if any(word in message_lower for word in ['ржХрж┐', 'what is healthnest', 'app', 'ржЕрзНржпрж╛ржк', 'healthnest ржХрзА', 'ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░']):
        if 'ржХрзЗржи' in message_lower or 'why' in message_lower or 'ржмрзНржпржмрж╣рж╛рж░' in message_lower:
            response = f"ЁЯПе **HealthNest ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?**\n\n{HEALTH_KNOWLEDGE['app_info']['purpose']}\n\n"
            response += "**ржкрзНрж░ржзрж╛ржи рж╕рзБржмрж┐ржзрж╛:**\n"
            for benefit in HEALTH_KNOWLEDGE['app_info']['why_use']:
                response += f"{benefit}\n"
            return response
        
        if 'ржХрж┐ржнрж╛ржмрзЗ' in message_lower or 'how to use' in message_lower or 'ржмрзНржпржмрж╣рж╛рж░' in message_lower:
            response = "ЁЯУ▒ **HealthNest ржХрж┐ржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?**\n\n"
            for step in HEALTH_KNOWLEDGE['app_info']['how_to_use']:
                response += f"{step}\n"
            response += "\n**ржЖржкржирж╛рж░ рж╕рзБржмрж┐ржзрж╛:**\n"
            for benefit in HEALTH_KNOWLEDGE['app_info']['user_benefits']:
                response += f"{benefit}\n"
            return response
    
    # ==================== BMI QUERIES ====================
    
    if any(word in message_lower for word in ['bmi', 'ржмрж┐ржПржоржЖржЗ', 'body mass']):
        response = f"ЁЯУК **ржЖржкржирж╛рж░ BMI ржмрж┐рж╢рзНрж▓рзЗрж╖ржг:**\n\n"
        response += f"**ржЖржкржирж╛рж░ BMI:** {bmi} ({bmi_cat})\n"
        response += f"ржмржпрж╝рж╕: {age} ржмржЫрж░ | ржУржЬржи: {weight}kg | ржЙржЪрзНржЪрждрж╛: {height}cm\n\n"
        
        response += f"**BMI ржХрж┐?**\n{HEALTH_KNOWLEDGE['bmi']['what_is']}\n\n"
        response += f"**ржлрж░рзНржорзБрж▓рж╛:** {HEALTH_KNOWLEDGE['bmi']['formula']}\n\n"
        
        response += "**BMI ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐:**\n"
        for cat, desc in HEALTH_KNOWLEDGE['bmi']['categories'].items():
            response += f"тАв {desc}\n"
        
        response += f"\n**ржкрж░рж╛ржорж░рзНрж╢:**\n"
        for tip in HEALTH_KNOWLEDGE['bmi']['tips']:
            response += f"тЬУ {tip}\n"
        
        response += f"\nЁЯТб {HEALTH_KNOWLEDGE['bmi']['how_to_calculate']}"
        return response
    
    # ==================== WEIGHT LOSS QUERIES ====================
    
    if any(word in message_lower for word in ['weight loss', 'ржУржЬржи ржХржорж╛', 'lose weight', 'slim', 'fat']):
        target_calories = tdee - 500
        response = f"ЁЯОп **ржЖржкржирж╛рж░ ржУржЬржи ржХржорж╛ржирзЛрж░ ржкрж░рж┐ржХрж▓рзНржкржирж╛:**\n\n"
        response += f"**ржмрж░рзНрждржорж╛ржи ржЕржмрж╕рзНржерж╛:**\n"
        response += f"тАв ржУржЬржи: {weight}kg\n"
        response += f"тАв BMI: {bmi} ({bmi_cat})\n"
        response += f"тАв ржжрзИржирж┐ржХ ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржкрзНрж░ржпрж╝рзЛржЬржи: {tdee} kcal\n"
        response += f"тАв **ржУржЬржи ржХржорж╛рждрзЗ рж▓ржХрзНрж╖рзНржп:** {target_calories} kcal/ржжрж┐ржи\n\n"
        
        response += f"{HEALTH_KNOWLEDGE['weight_loss']['general']}\n\n"
        response += f"**ржирж┐рж░рж╛ржкржж рж╣рж╛рж░:** {HEALTH_KNOWLEDGE['weight_loss']['safe_rate']}\n\n"
        
        response += "**ржкрж░рж╛ржорж░рзНрж╢:**\n"
        for tip in HEALTH_KNOWLEDGE['weight_loss']['tips']:
            response += f"{tip}\n"
        
        response += "\n**ржЦрж╛ржмрж╛рж░ ржкрж░рж┐ржХрж▓рзНржкржирж╛:**\n"
        for meal, food in HEALTH_KNOWLEDGE['weight_loss']['diet_plan'].items():
            response += f"тАв {meal.title()}: {food}\n"
        
        return response
    
    # ==================== NUTRITION QUERIES ====================
    
    if any(word in message_lower for word in ['nutrition', 'ржкрзБрж╖рзНржЯрж┐', 'diet', 'ржЦрж╛ржмрж╛рж░', 'food']):
        protein_need = round(weight * 0.8, 1)
        response = f"ЁЯеЧ **ржЖржкржирж╛рж░ ржкрзБрж╖рзНржЯрж┐ ржкрж░рж┐ржХрж▓рзНржкржирж╛:**\n\n"
        response += f"**ржжрзИржирж┐ржХ ржкрзНрж░ржпрж╝рзЛржЬржи:**\n"
        response += f"тАв ржХрзНржпрж╛рж▓рзЛрж░рж┐: {tdee} kcal\n"
        response += f"тАв ржкрзНрж░рзЛржЯрж┐ржи: {protein_need}g (ржУржЬржирзЗрж░ 0.8g/kg)\n"
        response += f"тАв ржкрж╛ржирж┐: {water}L\n"
        response += f"тАв ржлрж╛ржЗржмрж╛рж░: 25-30g\n\n"
        
        response += f"{HEALTH_KNOWLEDGE['nutrition']['balanced_diet']}\n\n"
        
        response += "**ржорзНржпрж╛ржХрзНрж░рзЛржирж┐ржЙржЯрзНрж░рж┐ржпрж╝рзЗржирзНржЯ:**\n"
        for macro, info in HEALTH_KNOWLEDGE['nutrition']['macros'].items():
            response += f"тАв {macro.upper()}: {info}\n"
        
        response += "\n**ржЦрж╛ржмрж╛рж░рзЗрж░ рж╕ржоржпрж╝:**\n"
        for timing in HEALTH_KNOWLEDGE['nutrition']['meal_timing']:
            response += f"тАв {timing}\n"
        
        response += f"\nЁЯТб {HEALTH_KNOWLEDGE['nutrition']['food_tracking']}"
        return response
    
    # ==================== WATER INTAKE QUERIES ====================
    
    if any(word in message_lower for word in ['water', 'ржкрж╛ржирж┐', 'hydrat', 'drink']):
        response = f"ЁЯТз **ржЖржкржирж╛рж░ ржкрж╛ржирж┐ ржкрж╛ржирзЗрж░ ржирж┐рж░рзНржжрзЗрж╢ржирж╛:**\n\n"
        response += f"**ржЖржкржирж╛рж░ ржЬржирзНржп:** {water}L ржкрзНрж░рждрж┐ржжрж┐ржи\n"
        response += f"(рж╢рж░рзАрж░рзЗрж░ ржУржЬржи {weight}kg ├Ч 0.033 = {water}L)\n\n"
        
        response += f"{HEALTH_KNOWLEDGE['water']['daily_need']}\n\n"
        
        response += "**ржкрж╛ржирж┐рж░ ржЙржкржХрж╛рж░рж┐рждрж╛:**\n"
        for benefit in HEALTH_KNOWLEDGE['water']['benefits']:
            response += f"{benefit}\n"
        
        response += "\n**ржХржЦржи ржкрж╛ржирж┐ ржкрж╛ржи ржХрж░ржмрзЗржи:**\n"
        for when in HEALTH_KNOWLEDGE['water']['when_to_drink']:
            response += f"тАв {when}\n"
        
        response += f"\nЁЯТб {HEALTH_KNOWLEDGE['water']['app_feature']}"
        return response
    
    # ==================== SLEEP QUERIES ====================
    
    if any(word in message_lower for word in ['sleep', 'ржШрзБржо', 'rest', 'рждрж┐ржжрзНрж░рж╛']):
        response = f"ЁЯШ┤ **ржШрзБржо рж╕ржорзНржкрж░рзНржХрж┐ржд рждржерзНржп:**\n\n"
        response += f"**ржЖржкржирж╛рж░ ржмржпрж╝рж╕рзЗрж░ ржЬржирзНржп ржкрзНрж░ржпрж╝рзЛржЬржи:** 7-9 ржШржгрзНржЯрж╛\n\n"
        
        response += "**рж╕ржХрж▓рзЗрж░ ржЬржирзНржп:**\n"
        for age_group, hours in HEALTH_KNOWLEDGE['sleep']['daily_need'].items():
            response += f"тАв {age_group.title()}: {hours}\n"
        
        response += "\n**ржШрзБржорзЗрж░ ржЙржкржХрж╛рж░рж┐рждрж╛:**\n"
        for benefit in HEALTH_KNOWLEDGE['sleep']['benefits']:
            response += f"{benefit}\n"
        
        response += "\n**ржорж╛ржи ржЙржирзНржиржд ржХрж░рж╛рж░ ржЙржкрж╛ржпрж╝:**\n"
        for tip in HEALTH_KNOWLEDGE['sleep']['quality_tips']:
            response += f"{tip}\n"
        
        response += f"\nЁЯТб {HEALTH_KNOWLEDGE['sleep']['tracker']}"
        return response
    
    # ==================== FITNESS & EXERCISE QUERIES ====================
    
    if any(word in message_lower for word in ['exercise', 'ржмрзНржпрж╛ржпрж╝рж╛ржо', 'workout', 'fitness', 'gym']):
        response = f"ЁЯТк **ржЖржкржирж╛рж░ ржлрж┐ржЯржирзЗрж╕ ржкрж░рж┐ржХрж▓рзНржкржирж╛:**\n\n"
        response += f"**ржжрзИржирж┐ржХ ржкржжржХрзНрж╖рзЗржк рж▓ржХрзНрж╖рзНржп:** {steps} steps\n"
        response += f"**ржХрзНржпрж╛рж▓рзЛрж░рж┐ ржмрж╛рж░рзНржи ржкрзНрж░ржпрж╝рзЛржЬржи:** {tdee} kcal/ржжрж┐ржи\n\n"
        
        response += "**ржмрзНржпрж╛ржпрж╝рж╛ржорзЗрж░ ржзрж░ржг:**\n"
        for ex_type, desc in HEALTH_KNOWLEDGE['fitness']['types'].items():
            response += f"тАв {ex_type.upper()}: {desc}\n"
        
        response += "\n**рж╢рзБрж░рзБржХрж╛рж░рзАржжрзЗрж░ ржЬржирзНржп:**\n"
        for week, plan in HEALTH_KNOWLEDGE['fitness']['beginner_plan'].items():
            response += f"тАв {week.replace('_', ' ').title()}: {plan}\n"
        
        response += "\n**ржкрж░рж╛ржорж░рзНрж╢:**\n"
        for tip in HEALTH_KNOWLEDGE['fitness']['tips']:
            response += f"тЬУ {tip}\n"
        
        response += f"\nЁЯТб {HEALTH_KNOWLEDGE['fitness']['app_features']}"
        return response
    
    # ==================== PREGNANCY QUERIES ====================
    
    if any(word in message_lower for word in ['pregnan', 'ржЧрж░рзНржн', 'ржорж╛', 'baby', 'рж╢рж┐рж╢рзБ']):
        response = f"ЁЯд░ **ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛ рж╕ржорзНржкрж░рзНржХрж┐ржд рждржерзНржп:**\n\n"
        response += f"{HEALTH_KNOWLEDGE['pregnancy']['overview']}\n\n"
        
        response += "**ржЯрзНрж░рж╛ржЗржорзЗрж╕рзНржЯрж╛рж░:**\n"
        for trimester, info in HEALTH_KNOWLEDGE['pregnancy']['trimesters'].items():
            response += f"тАв {info}\n"
        
        response += "\n**ржкрзБрж╖рзНржЯрж┐:**\n"
        for nutrition in HEALTH_KNOWLEDGE['pregnancy']['nutrition']:
            response += f"{nutrition}\n"
        
        response += "\n**ржирж┐рж░рж╛ржкржж ржмрзНржпрж╛ржпрж╝рж╛ржо:**\n"
        for exercise in HEALTH_KNOWLEDGE['pregnancy']['exercise']:
            response += f"тАв {exercise}\n"
        
        response += f"\nЁЯТб {HEALTH_KNOWLEDGE['pregnancy']['app_features']}"
        return response
    
    # ==================== WOMEN'S HEALTH QUERIES ====================
    
    if any(word in message_lower for word in ['period', 'ржкрж┐рж░рж┐ржпрж╝ржб', 'menstrua', 'ржорж╛рж╕рж┐ржХ', 'pcos', 'menopause']):
        response = f"ЁЯСй **ржорж╣рж┐рж▓рж╛ржжрзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп:**\n\n"
        
        response += "**ржкрж┐рж░рж┐ржпрж╝ржб рж╕рж╛ржЗржХрзЗрж▓:**\n"
        period = HEALTH_KNOWLEDGE['womens_health']['period']
        response += f"тАв рж╕рж╛ржЗржХрзЗрж▓: {period['cycle']}\n"
        response += f"тАв рж╕ржоржпрж╝ржХрж╛рж▓: {period['duration']}\n"
        response += "\n**ржмрзНржпржерж╛ ржЙржкрж╢ржо:**\n"
        for relief in period['pain_relief']:
            response += f"тАв {relief}\n"
        
        if 'pcos' in message_lower:
            pcos = HEALTH_KNOWLEDGE['womens_health']['pcos']
            response += f"\n**PCOS рж▓ржХрзНрж╖ржг:** {pcos['symptoms']}\n"
            response += "**ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛:**\n"
            for manage in pcos['management']:
                response += f"тАв {manage}\n"
        
        response += f"\nЁЯТб {period['tracker']}"
        return response
    
    # ==================== MEDICINE QUERIES ====================
    
    if any(word in message_lower for word in ['medicine', 'ржФрж╖ржз', 'drug', 'medication', 'pill']):
        response = f"ЁЯТК **ржФрж╖ржз рж╕ржорзНржкрж░рзНржХрж┐ржд рждржерзНржп:**\n\n"
        response += f"{HEALTH_KNOWLEDGE['medicine']['importance']}\n\n"
        
        response += "**ржкрж░рж╛ржорж░рзНрж╢:**\n"
        for tip in HEALTH_KNOWLEDGE['medicine']['tips']:
            response += f"{tip}\n"
        
        response += f"\nЁЯТб {HEALTH_KNOWLEDGE['medicine']['app_feature']}"
        return response
    
    # ==================== BLOOD PRESSURE QUERIES ====================
    
    if any(word in message_lower for word in ['blood pressure', 'рж░ржХрзНрждржЪрж╛ржк', 'bp', 'hypertension']):
        response = f"ЁЯй╕ **рж░ржХрзНрждржЪрж╛ржк рж╕ржорзНржкрж░рзНржХрж┐ржд рждржерзНржп:**\n\n"
        response += f"**рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ:** {HEALTH_KNOWLEDGE['blood_pressure']['normal']}\n\n"
        
        response += "**ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐:**\n"
        for cat, desc in HEALTH_KNOWLEDGE['blood_pressure']['categories'].items():
            response += f"тАв {desc}\n"
        
        response += "\n**ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗрж░ ржЙржкрж╛ржпрж╝:**\n"
        for manage in HEALTH_KNOWLEDGE['blood_pressure']['management']:
            response += f"{manage}\n"
        
        return response
    
    # ==================== BLOOD SUGAR/DIABETES QUERIES ====================
    
    if any(word in message_lower for word in ['sugar', 'diabetes', 'glucose', 'ржЪрж┐ржирж┐', 'ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕']):
        response = f"ЁЯй╕ **рж░ржХрзНрждрзЗ рж╢рж░рзНржХрж░рж╛/ржбрж╛ржпрж╝рж╛ржмрзЗржЯрж┐рж╕:**\n\n"
        response += "**рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ ржорж╛рждрзНрж░рж╛:**\n"
        for test, value in HEALTH_KNOWLEDGE['blood_sugar']['normal'].items():
            response += f"тАв {test.replace('_', ' ').title()}: {value}\n"
        
        response += "\n**ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЙржкрж╛ржпрж╝:**\n"
        for prevent in HEALTH_KNOWLEDGE['blood_sugar']['diabetes_prevention']:
            response += f"{prevent}\n"
        
        response += f"\n**рж▓ржХрзНрж╖ржг:** {HEALTH_KNOWLEDGE['blood_sugar']['signs']}"
        return response
    
    # ==================== MENTAL HEALTH QUERIES ====================
    
    if any(word in message_lower for word in ['mental', 'stress', 'ржорж╛ржирж╕рж┐ржХ', 'ржЪрж╛ржк', 'anxiety', 'depression']):
        response = f"ЁЯза **ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп:**\n\n"
        response += f"{HEALTH_KNOWLEDGE['mental_health']['importance']}\n\n"
        
        response += "**ржЪрж╛ржк ржХржорж╛ржирзЛрж░ ржЙржкрж╛ржпрж╝:**\n"
        for tip in HEALTH_KNOWLEDGE['mental_health']['stress_management']:
            response += f"{tip}\n"
        
        if 'anxiety' in message_lower or 'ржжрзБрж╢рзНржЪрж┐ржирзНрждрж╛' in message_lower:
            response += "\n**ржжрзБрж╢рзНржЪрж┐ржирзНрждрж╛ ржХржорж╛ржирзЛ:**\n"
            for tip in HEALTH_KNOWLEDGE['mental_health']['anxiety_tips']:
                response += f"тАв {tip}\n"
        
        return response
    
    # ==================== HEALTH DIARY QUERIES ====================
    
    if any(word in message_lower for word in ['diary', 'ржбрж╛ржпрж╝рзЗрж░рж┐', 'log', 'record']):
        response = f"ЁЯУЭ **рж╕рзНржмрж╛рж╕рзНржерзНржп ржбрж╛ржпрж╝рзЗрж░рж┐:**\n\n"
        response += f"{HEALTH_KNOWLEDGE['health_diary']['purpose']}\n\n"
        
        response += "**ржХрж┐ рж▓рж┐ржЦржмрзЗржи:**\n"
        for item in HEALTH_KNOWLEDGE['health_diary']['what_to_log']:
            response += f"{item}\n"
        
        response += "\n**ржЙржкржХрж╛рж░рж┐рждрж╛:**\n"
        for benefit in HEALTH_KNOWLEDGE['health_diary']['benefits']:
            response += f"тАв {benefit}\n"
        
        response += f"\nЁЯТб {HEALTH_KNOWLEDGE['health_diary']['app_feature']}"
        return response
    
    # ==================== FAMILY HEALTH QUERIES ====================
    
    if any(word in message_lower for word in ['family', 'ржкрж░рж┐ржмрж╛рж░', 'child', 'рж╢рж┐рж╢рзБ']):
        response = f"ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСж **ржкрж░рж┐ржмрж╛рж░рзЗрж░ рж╕рзНржмрж╛рж╕рзНржерзНржп:**\n\n"
        response += f"{HEALTH_KNOWLEDGE['family_health']['features']}\n\n"
        
        response += "**рж╕рзБржмрж┐ржзрж╛:**\n"
        for benefit in HEALTH_KNOWLEDGE['family_health']['benefits']:
            response += f"{benefit}\n"
        
        return response
    
    # ==================== DEFAULT PERSONALIZED RESPONSE ====================
    
    response = f"ЁЯСЛ рж╣рзНржпрж╛рж▓рзЛ! ржЖржорж┐ HealthNest AI, ржЖржкржирж╛рж░ ржмрзНржпржХрзНрждрж┐ржЧржд рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рж╣рж╛ржпрж╝ржХред\n\n"
    response += f"**ржЖржкржирж╛рж░ ржкрзНрж░рзЛржлрж╛ржЗрж▓:**\n"
    response += f"тАв ржмржпрж╝рж╕: {age} ржмржЫрж░\n"
    response += f"тАв BMI: {bmi} ({bmi_cat})\n"
    response += f"тАв ржжрзИржирж┐ржХ ржХрзНржпрж╛рж▓рзЛрж░рж┐: {tdee} kcal\n"
    response += f"тАв ржкрж╛ржирж┐: {water}L\n"
    response += f"тАв ржкржжржХрзНрж╖рзЗржк рж▓ржХрзНрж╖рзНржп: {steps} steps\n\n"
    
    response += "ржЖржорж┐ ржЖржкржирж╛ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рждрзЗ ржкрж╛рж░рж┐:\n"
    for feature in HEALTH_KNOWLEDGE['app_info']['why_use'][:5]:
        response += f"{feature}\n"
    
    response += "\nржХрзЛржи ржкрзНрж░рж╢рзНржи ржЖржЫрзЗ? ржпрзЗржоржи: BMI, ржУржЬржи ржХржорж╛ржирзЛ, ржкрзБрж╖рзНржЯрж┐, ржмрзНржпрж╛ржпрж╝рж╛ржо, ржЧрж░рзНржнрж╛ржмрж╕рзНржерж╛, ржФрж╖ржз ржЗрждрзНржпрж╛ржжрж┐ред"
    
    return response

# ==================== API ROUTES ====================

@app.route('/')
def home():
    return jsonify({
        "status": "healthy",
        "message": "HealthNest AI Comprehensive Chatbot",
        "version": "2.0",
        "features": [
            "BMI calculation & advice",
            "Weight loss planning",
            "Nutrition guidance",
            "Water intake calculation",
            "Sleep tracking info",
            "Fitness & exercise plans",
            "Pregnancy guidance",
            "Women's health support",
            "Medicine reminders",
            "Blood pressure management",
            "Diabetes prevention",
            "Mental health support",
            "Health diary guidance",
            "Family health management",
            "HealthNest app features info"
        ]
    })

@app.route('/health', methods=['GET'])
def health_check():
    return jsonify({
        "status": "healthy",
        "models_loaded": True,
        "timestamp": datetime.now().isoformat()
    })

@app.route('/chat', methods=['POST'])
def chat():
    try:
        data = request.json
        message = data.get('message', '')
        profile = data.get('profile', {})
        
        if not message:
            return jsonify({"error": "No message provided"}), 400
        
        # Generate comprehensive response
        response = get_comprehensive_response(message, profile)
        
        return jsonify({
            "response": response,
            "category": "health_advice",
            "confidence": 0.95,
            "timestamp": datetime.now().isoformat()
        })
        
    except Exception as e:
        return jsonify({"error": str(e)}), 500

if __name__ == '__main__':
    print("="*60)
    print("ЁЯПе HealthNest AI Comprehensive Chatbot Started!")
    print("="*60)
    print("Features: BMI, Weight Loss, Nutrition, Water, Sleep, Fitness,")
    print("         Pregnancy, Women's Health, Medicine, BP, Diabetes,")
    print("         Mental Health, Health Diary, Family Health, App Info")
    print("="*60)
    print("Server running on http://0.0.0.0:5000")
    print("="*60)
    app.run(host='0.0.0.0', port=5000, debug=True)
